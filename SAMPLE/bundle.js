!function(t){function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=44)}([function(t,n,e){"use strict";function i(t,n){this._groups=t,this._parents=n}function o(){return new i([[document.documentElement]],q)}e.d(n,"b",function(){return q}),n.a=i;var r=e(54),a=e(55),s=e(56),c=e(57),u=e(26),l=e(59),h=e(60),f=e(61),p=e(62),d=e(63),_=e(64),y=e(65),v=e(66),x=e(67),b=e(68),g=e(69),m=e(70),w=e(71),j=e(72),M=e(73),k=e(74),O=e(75),T=e(76),A=e(77),S=e(78),N=e(79),P=e(80),C=e(15),E=e(81),q=[null];i.prototype=o.prototype={constructor:i,select:r.a,selectAll:a.a,filter:s.a,data:c.a,enter:u.b,exit:l.a,merge:h.a,order:f.a,sort:p.a,call:d.a,nodes:_.a,node:y.a,size:v.a,empty:x.a,each:b.a,attr:g.a,style:m.a,property:w.a,classed:j.a,text:M.a,html:k.a,raise:O.a,lower:T.a,append:A.a,insert:S.a,remove:N.a,datum:P.a,on:C.b,dispatch:E.a}},function(t,n,e){"use strict";n.a=function(t){return function(){return t}}},function(t,n,e){"use strict";e.d(n,"a",function(){return i}),e.d(n,"c",function(){return o}),e.d(n,"b",function(){return r}),e.d(n,"d",function(){return a});var i=1e-12,o=Math.PI,r=o/2,a=2*o},function(t,n,e){"use strict";n.a=function(t,n){if((i=t.length)>1)for(var e,i,o=1,r=t[n[0]],a=r.length;o<i;++o){e=r,r=t[n[o]];for(var s=0;s<a;++s)r[s][1]+=r[s][0]=isNaN(e[s][1])?e[s][0]:e[s][1]}}},function(t,n,e){"use strict";n.a=function(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}},function(t,n,e){"use strict";var i=(e(11),e(51),e(24),e(52));e.d(n,"c",function(){return i.a});var o=(e(12),e(13),e(53));e.d(n,"d",function(){return o.a});var r=(e(82),e(0),e(17),e(25),e(83));e.d(n,"e",function(){return r.a});var a=(e(84),e(18),e(15));e.d(n,"b",function(){return a.c}),e.d(n,"a",function(){return a.a})},function(t,n,e){"use strict";var i=e(92);e.d(n,"a",function(){return i.a})},function(t,n,e){"use strict";function i(t){this._context=t}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},n.a=function(t){return new i(t)}},function(t,n,e){"use strict";n.a=function(){}},function(t,n,e){"use strict";function i(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function o(t){this._context=t}n.b=i,n.a=o,o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:i(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:i(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}}},function(t,n,e){"use strict";function i(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function o(t,n){this._context=t,this._k=(1-n)/6}n.b=i,n.a=o,o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:i(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:i(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};!function t(n){function e(t){return new o(t,n)}return e.tension=function(n){return t(+n)},e}(0)},function(t,n,e){"use strict";function i(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===a.b&&n.documentElement.namespaceURI===a.b?n.createElement(t):n.createElementNS(e,t)}}function o(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var r=e(12),a=e(13);n.a=function(t){var n=Object(r.a)(t);return(n.local?o:i)(n)}},function(t,n,e){"use strict";var i=e(13);n.a=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),i.a.hasOwnProperty(n)?{space:i.a[n],local:t}:t}},function(t,n,e){"use strict";e.d(n,"b",function(){return i});var i="http://www.w3.org/1999/xhtml";n.a={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(t,n,e){"use strict";var i=e(15);n.a=function(){for(var t,n=i.c;t=n.sourceEvent;)n=t;return n}},function(t,n,e){"use strict";function i(t,n,e){return t=o(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function o(t,n,e){return function(i){var o=l;l=i;try{t.call(this,this.__data__,n,e)}finally{l=o}}}function r(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}function a(t){return function(){var n=this.__on;if(n){for(var e,i=0,o=-1,r=n.length;i<r;++i)e=n[i],t.type&&e.type!==t.type||e.name!==t.name?n[++o]=e:this.removeEventListener(e.type,e.listener,e.capture);++o?n.length=o:delete this.__on}}}function s(t,n,e){var r=u.hasOwnProperty(t.type)?i:o;return function(i,o,a){var s,c=this.__on,u=r(n,o,a);if(c)for(var l=0,h=c.length;l<h;++l)if((s=c[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=e),void(s.value=n);this.addEventListener(t.type,u,e),s={type:t.type,name:t.name,value:n,listener:u,capture:e},c?c.push(s):this.__on=[s]}}function c(t,n,e,i){var o=l;t.sourceEvent=l,l=t;try{return n.apply(e,i)}finally{l=o}}e.d(n,"c",function(){return l}),n.a=c;var u={},l=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(u={mouseenter:"mouseover",mouseleave:"mouseout"})}n.b=function(t,n,e){var i,o,c=r(t+""),u=c.length;{if(!(arguments.length<2)){for(l=n?s:a,null==e&&(e=!1),i=0;i<u;++i)this.each(l(c[i],n,e));return this}var l=this.node().__on;if(l)for(var h,f=0,p=l.length;f<p;++f)for(i=0,h=l[f];i<u;++i)if((o=c[i]).type===h.type&&o.name===h.name)return h.value}}},function(t,n,e){"use strict";n.a=function(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var o=t.getBoundingClientRect();return[n.clientX-o.left-t.clientLeft,n.clientY-o.top-t.clientTop]}},function(t,n,e){"use strict";function i(){}n.a=function(t){return null==t?i:function(){return this.querySelector(t)}}},function(t,n,e){"use strict";n.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(t,n,e){"use strict";var i=e(6),o=e(1),r=e(7),a=e(32);n.a=function(){function t(t){var o,r,a,h=t.length,f=!1;for(null==c&&(l=u(a=Object(i.a)())),o=0;o<=h;++o)!(o<h&&s(r=t[o],o,t))===f&&((f=!f)?l.lineStart():l.lineEnd()),f&&l.point(+n(r,o,t),+e(r,o,t));if(a)return l=null,a+""||null}var n=a.a,e=a.b,s=Object(o.a)(!0),c=null,u=r.a,l=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Object(o.a)(+e),t):n},t.y=function(n){return arguments.length?(e="function"==typeof n?n:Object(o.a)(+n),t):e},t.defined=function(n){return arguments.length?(s="function"==typeof n?n:Object(o.a)(!!n),t):s},t.curve=function(n){return arguments.length?(u=n,null!=c&&(l=u(c)),t):u},t.context=function(n){return arguments.length?(null==n?c=l=null:l=u(c=n),t):c},t}},function(t,n,e){"use strict";function i(t,n,e){var i=t._x1,o=t._y1,a=t._x2,s=t._y2;if(t._l01_a>r.a){var c=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*c-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,o=(o*c-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>r.a){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-n*t._l12_2a)/h,s=(s*l+t._y1*t._l23_2a-e*t._l12_2a)/h}t._context.bezierCurveTo(i,o,a,s,t._x2,t._y2)}function o(t,n){this._context=t,this._alpha=n}n.b=i;var r=e(2),a=e(10);o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,o=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:i(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},n.a=function t(n){function e(t){return n?new o(t,n):new a.a(t,0)}return e.alpha=function(n){return t(+n)},e}(.5)},function(t,n,e){"use strict";function i(t){for(var n,e=0,i=-1,o=t.length;++i<o;)(n=+t[i][1])&&(e+=n);return e}n.b=i;var o=e(4);n.a=function(t){var n=t.map(i);return Object(o.a)(t).sort(function(t,e){return n[t]-n[e]})}},function(t,n){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){"use strict";function i(t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t-1]}function o(t){console.log(t);var n=JSON.stringify(+t.year)+JSON.stringify(+t.month)+JSON.stringify(+t.day)+JSON.stringify(+t.letterID);console.log("letter concat: "+n);var e=d3.select(".letter");d3.select("body").classed("is-no-scroll",!0),e.classed("is-visible",!0),e.select(".letter__title").html("<span>Appeared in: </span>"+t.title),e.select(".letter__body").html(t.question_only||t.text),e.select(".letter__date").html(function(){return t.month<44?i(t.month)+" "+t.day+", "+t.year:"April 19, 1993"}),e.on("click",function(){e.classed("is-visible",!1),d3.selectAll(".tooltip-close-button").st("visibility","hidden"),d3.select("body").classed("is-no-scroll",!1)})}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o},function(t,n,e){"use strict";var i=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var o=document.documentElement;if(!o.matches){var r=o.webkitMatchesSelector||o.msMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector;i=function(t){return function(){return r.call(this,t)}}}}n.a=i},function(t,n,e){"use strict";function i(){return[]}n.a=function(t){return null==t?i:function(){return this.querySelectorAll(t)}}},function(t,n,e){"use strict";function i(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}n.a=i;var o=e(27),r=e(0);n.b=function(){return new r.a(this._enter||this._groups.map(o.a),this._parents)},i.prototype={constructor:i,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},function(t,n,e){"use strict";n.a=function(t){return new Array(t.length)}},function(t,n,e){"use strict";var i=e(87);e.d(n,"a",function(){return i.a})},function(t,n,e){"use strict";function i(t,n){var e=t.document.documentElement,i=Object(o.d)(t).on("dragstart.drag",null);n&&(i.on("click.drag",r.a,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}n.b=i;var o=e(5),r=e(30);n.a=function(t){var n=t.document.documentElement,e=Object(o.d)(t).on("dragstart.drag",r.a,!0);"onselectstart"in n?e.on("selectstart.drag",r.a,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}},function(t,n,e){"use strict";function i(){o.b.stopImmediatePropagation()}n.b=i;var o=e(5);n.a=function(){o.b.preventDefault(),o.b.stopImmediatePropagation()}},function(t,n,e){"use strict";var i=e(6),o=e(1),r=e(7),a=e(19),s=e(32);n.a=function(){function t(t){var n,o,r,a,s,_=t.length,y=!1,v=new Array(_),x=new Array(_);for(null==f&&(d=p(s=Object(i.a)())),n=0;n<=_;++n){if(!(n<_&&h(a=t[n],n,t))===y)if(y=!y)o=n,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),r=n-1;r>=o;--r)d.point(v[r],x[r]);d.lineEnd(),d.areaEnd()}y&&(v[n]=+e(a,n,t),x[n]=+u(a,n,t),d.point(c?+c(a,n,t):v[n],l?+l(a,n,t):x[n]))}if(s)return d=null,s+""||null}function n(){return Object(a.a)().defined(h).curve(p).context(f)}var e=s.a,c=null,u=Object(o.a)(0),l=s.b,h=Object(o.a)(!0),f=null,p=r.a,d=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Object(o.a)(+n),c=null,t):e},t.x0=function(n){return arguments.length?(e="function"==typeof n?n:Object(o.a)(+n),t):e},t.x1=function(n){return arguments.length?(c=null==n?null:"function"==typeof n?n:Object(o.a)(+n),t):c},t.y=function(n){return arguments.length?(u="function"==typeof n?n:Object(o.a)(+n),l=null,t):u},t.y0=function(n){return arguments.length?(u="function"==typeof n?n:Object(o.a)(+n),t):u},t.y1=function(n){return arguments.length?(l=null==n?null:"function"==typeof n?n:Object(o.a)(+n),t):l},t.lineX0=t.lineY0=function(){return n().x(e).y(u)},t.lineY1=function(){return n().x(e).y(l)},t.lineX1=function(){return n().x(c).y(u)},t.defined=function(n){return arguments.length?(h="function"==typeof n?n:Object(o.a)(!!n),t):h},t.curve=function(n){return arguments.length?(p=n,null!=f&&(d=p(f)),t):p},t.context=function(n){return arguments.length?(null==n?f=d=null:d=p(f=n),t):f},t}},function(t,n,e){"use strict";function i(t){return t[0]}function o(t){return t[1]}n.a=i,n.b=o},function(t,n,e){"use strict";function i(t){this._curve=t}function o(t){function n(n){return new i(t(n))}return n._curve=t,n}e.d(n,"a",function(){return a}),n.b=o;var r=e(7),a=o(r.a);i.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}}},function(t,n,e){"use strict";function i(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(Object(o.b)(t)):n()._curve},t}n.a=i;var o=e(33);e(19)},function(t,n,e){"use strict";var i=e(2);n.a={draw:function(t,n){var e=Math.sqrt(n/i.c);t.moveTo(e,0),t.arc(0,0,e,0,i.d)}}},function(t,n,e){"use strict";n.a={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}}},function(t,n,e){"use strict";var i=Math.sqrt(1/3),o=2*i;n.a={draw:function(t,n){var e=Math.sqrt(n/o),r=e*i;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}}},function(t,n,e){"use strict";var i=e(2),o=Math.sin(i.c/10)/Math.sin(7*i.c/10),r=Math.sin(i.d/10)*o,a=-Math.cos(i.d/10)*o;n.a={draw:function(t,n){var e=Math.sqrt(.8908130915292852*n),o=r*e,s=a*e;t.moveTo(0,-e),t.lineTo(o,s);for(var c=1;c<5;++c){var u=i.d*c/5,l=Math.cos(u),h=Math.sin(u);t.lineTo(h*e,-l*e),t.lineTo(l*o-h*s,h*o+l*s)}t.closePath()}}},function(t,n,e){"use strict";n.a={draw:function(t,n){var e=Math.sqrt(n),i=-e/2;t.rect(i,i,e,e)}}},function(t,n,e){"use strict";var i=Math.sqrt(3);n.a={draw:function(t,n){var e=-Math.sqrt(n/(3*i));t.moveTo(0,2*e),t.lineTo(-i*e,-e),t.lineTo(i*e,-e),t.closePath()}}},function(t,n,e){"use strict";var i=-.5,o=Math.sqrt(3)/2,r=1/Math.sqrt(12),a=3*(r/2+1);n.a={draw:function(t,n){var e=Math.sqrt(n/a),s=e/2,c=e*r,u=s,l=e*r+e,h=-u,f=l;t.moveTo(s,c),t.lineTo(u,l),t.lineTo(h,f),t.lineTo(i*s-o*c,o*s+i*c),t.lineTo(i*u-o*l,o*u+i*l),t.lineTo(i*h-o*f,o*h+i*f),t.lineTo(i*s+o*c,i*c-o*s),t.lineTo(i*u+o*l,i*l-o*u),t.lineTo(i*h+o*f,i*f-o*h),t.closePath()}}},function(t,n,e){"use strict";function i(t,n){this._context=t,this._k=(1-n)/6}n.a=i;var o=e(8),r=e(10);i.prototype={areaStart:o.a,areaEnd:o.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Object(r.b)(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};!function t(n){function e(t){return new i(t,n)}return e.tension=function(n){return t(+n)},e}(0)},function(t,n,e){"use strict";function i(t,n){this._context=t,this._k=(1-n)/6}n.a=i;var o=e(10);i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(o.b)(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};!function t(n){function e(t){return new i(t,n)}return e.tension=function(n){return t(+n)},e}(0)},function(t,n,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){var t=d.node().offsetWidth;_!==t&&(_=t,l.default.resize(),f.default.resize())}var r=e(45),a=i(r),s=e(46),c=i(s),u=e(47),l=i(u),h=e(116),f=i(h),p=e(117),d=(i(p),d3.select("body")),_=0;!function(){d.classed("is-mobile",c.default.any()),window.addEventListener("resize",(0,a.default)(o,150)),f.default.init(),l.default.init()}()},function(t,n,e){(function(n){function e(t,n,e){function o(n){var e=_,i=y;return _=y=void 0,M=n,x=t.apply(i,e)}function r(t){return M=t,b=setTimeout(l,n),k?o(t):x}function c(t){var e=t-j,i=t-M,o=n-e;return O?m(o,v-i):o}function u(t){var e=t-j,i=t-M;return void 0===j||e>=n||e<0||O&&i>=v}function l(){var t=w();if(u(t))return h(t);b=setTimeout(l,c(t))}function h(t){return b=void 0,T&&_?o(t):(_=y=void 0,x)}function f(){void 0!==b&&clearTimeout(b),M=0,_=j=y=b=void 0}function p(){return void 0===b?x:h(w())}function d(){var t=w(),e=u(t);if(_=arguments,y=this,j=t,e){if(void 0===b)return r(j);if(O)return b=setTimeout(l,n),o(j)}return void 0===b&&(b=setTimeout(l,n)),x}var _,y,v,x,b,j,M=0,k=!1,O=!1,T=!0;if("function"!=typeof t)throw new TypeError(s);return n=a(n)||0,i(e)&&(k=!!e.leading,O="maxWait"in e,v=O?g(a(e.maxWait)||0,n):v,T="trailing"in e?!!e.trailing:T),d.cancel=f,d.flush=p,d}function i(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function o(t){return!!t&&"object"==typeof t}function r(t){return"symbol"==typeof t||o(t)&&b.call(t)==u}function a(t){if("number"==typeof t)return t;if(r(t))return c;if(i(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=i(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var e=f.test(t);return e||p.test(t)?d(t.slice(2),e?2:8):h.test(t)?c:+t}var s="Expected a function",c=NaN,u="[object Symbol]",l=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,p=/^0o[0-7]+$/i,d=parseInt,_="object"==typeof n&&n&&n.Object===Object&&n,y="object"==typeof self&&self&&self.Object===Object&&self,v=_||y||Function("return this")(),x=Object.prototype,b=x.toString,g=Math.max,m=Math.min,w=function(){return v.Date.now()};t.exports=e}).call(n,e(22))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return i.android()||i.blackberry()||i.ios()||i.opera()||i.windows()}};n.default=i},function(t,n,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function r(t,n){var e=A.annotationCustomType(A.annotationLabel,{className:"custom",connector:{end:"dot"},note:{align:"middle",orientation:"leftRight"}}),i=t.map(function(t){return{note:{title:t.title},data:t,dy:0,dx:3*E}});return A.annotation().editMode(!1).textWrap(200).type(e).accessors({x:function(t){return U.x(t.year)+E/2},y:function(t){return n-U.y(t.index)+q/2}}).annotations(i)}function a(t,n){var e=d3.select(t),i=e.select("svg");if(i.size()){var o=i.select("g");o.at("transform","translate("+X.left+", "+X.top+")");var a=d3.max(n.countByYear,function(t){return t.value}),s=a*(q+1);i.at({width:Y+X.left+X.right,height:s+X.top+X.bottom}),i.selectAll(".year").at("transform",function(t){return"translate("+U.x(+t.key)+", 0)"}),i.selectAll(".year").selectAll(".post").data(function(t){return t.value},function(t){return t.id}).transition().duration(500).ease(d3.easeCubicInOut).delay(function(t,n){return 50*n}).at("transform",function(t,n){return"translate(0, "+(s-U.y(n))+")"}).at({width:E,height:q,rx:1,ry:1});var c=d3.axisBottom(U.x).tickFormat(function(t){return t%5==0?t:""}).tickSizeOuter(0);if(i.select(".g-axis").call(c).at("transform","translate("+X.left+", "+(s+X.bottom-X.top)+")"),C)return;var u=[];n.dataByYear.forEach(function(t){return u.push(t.value)});var l=u.concat.apply([],u),h=["Husband Has Gone Ape Over New Household Pet","Mother Seeks Spell to Make Daughter Break Up With Lover","Widow Never Dreamed She'd Be in Such Nightly Distress"],f=l.filter(function(t){return h.includes(t.title)}),p=r(f,s);o.select(".g-annotations").call(p);var d=i.select("g.annotation-note-content"),_=d.select("text.annotation-note-title").html();d.append("text.copied-title").html(_)}}function s(){Y=z.select(".graphic").node().offsetWidth-X.left-X.right,N=Y<F,H=Math.floor(.75*window.innerHeight)}function c(){s(),U.x.range([0,Y]),U.y.range([0,H]),E=U.x.bandwidth(),q=U.y.bandwidth(),V&&z.each(function(t,n,e){return a(e[n],t)})}function u(t){var n=t.filter(function(t){return"na"!==t.question_only});n=n.filter(function(t){return"Nan"!==t.question_only});var e=n.map(function(t,n){return w({id:n},t,{day:+t.day,year:+t.year,month:+t.month,question_only:t.question_only.replace(/(↵)([a-z])/g,function(t,n,e){return n+e.toUpperCase()}).replace(/([!?.]\s+)([a-z])/g,function(t,n,e){return n+e.toUpperCase()}).replace(/^[a-z]/,function(t){return t.toUpperCase()}).replace(/↵/g,"<br></br>").replace(/\si\s/g," I ").replace(/\si\'/g," I'")})});return{allData:e,dataByYear:d3.nest().key(function(t){return t.year}).rollup(function(t){return t.map(function(t,n){return w({},t,{index:n})})}).entries(e),countByYear:d3.nest().key(function(t){return t.year}).rollup(function(t){return t.length}).entries(e)}}function l(t){var n=t.el,e=t.allData,i=d3.select(n),o=d3.nest().key(function(t){return t.theme}).rollup(function(t){return t.length}).entries(e).filter(function(t){return t.key});o.sort(f);var r=o.slice(0,9),a=i.select(".sidebar"),s=i.select(".mobile-sidebar"),c=a.append("ul"),u=s.append("select.select"),l=c.selectAll("li.subtopics-item").data(r).enter().append("li.subtopics-item").at("class",function(t){return t.key+" x-small subtopics-item"}).html(function(t,n){return"\n\t\t\t\t<span class='key x-small'>"+t.key.replace(/_/g," ")+"</span>\n\t\t\t\t<span class='count xx-small'>"+t.value+(0===n?" posts":"")+"</span>\n\t\t\t"}),h=[{key:"All",value:e.length}].concat(r);u.selectAll("option.subtopics-item").data(h).enter().append("option.subtopics-item").at("class",function(t){return t.key+" small subtopics-item"}).html(function(t,n){return"\n\t\t\t\t<span class='key small'>"+t.key.replace(/_/g," ")+"</span>\n\t\t\t\t<span class='count xx-small'>("+t.value+(0===n?" posts":"")+")</span>\n\t\t\t"});l.on("click",function(t,e,o){console.log(t),i.select(".tooltip").classed("is-visible",!1),i.selectAll(".theme").classed("is-visible",!1),i.select(".theme-"+t.key).classed("is-visible",!0),l.classed("is-selected",function(t,n){return n===e}),i.selectAll("rect").classed("is-inactive",function(n){return n.theme!==t.key}),v({el:n,theme:t.key})}),i.select("svg").on("click",function(){W.classed("is-visible")||(i.select(".tooltip").classed("is-visible",!1),i.selectAll(".theme").classed("is-visible",!1),i.selectAll("rect.post").classed("is-inactive",!1),l.classed("is-selected",!1))}),s.on("change",function(t,e,o){var r=i.select("select.select").property("value").split(" (")[0].replace(/ /g,"_");i.select(".tooltip").classed("is-visible",!1),i.selectAll(".theme").classed("is-visible",!1),i.select(".theme-"+r).classed("is-visible",!0),i.selectAll("rect").classed("is-inactive",function(t){return"All"!==r&&t.theme!==r}),v({el:n,theme:"All"===r?null:r})})}function h(t){var n=t.el,e=t.dataByYear,i=d3.select(n),o=i.select(".graphic");o.append("p.graphic__label.tk-atlas.small").text("By Year");var r=o.select("svg"),a=r.append("g"),s=i.select(".tooltip");s.append("p.snippet.x-small.tk-atlas");var c=C?"Click here to read more":"Click post to read more";s.append("p.readmore.tk-atlas.xx-small").text(c),a.selectAll(".year").data(e).enter().append("g.year").selectAll(".post").data(function(t){return t.value},function(t){return t.id}).enter().append("rect").at("class",function(t){return"post "+(t.theme?"post-"+t.theme:"")}).at("transform","translate(0, -"+X.top+")").at("x",0).at("y",0),r.append("g.g-axis small"),a.append("g.g-annotations")}function f(t,n){return t.value<n.value?1:t.value>n.value?-1:0}function p(t){var n=t.chart,e=t.datum,i=t.index,o=t.nodes,r=function(t,n){return+t[n].replace("translate(","").replace(")","").trim()},a=d3.select(n),s=a.select("svg"),c=a.select(".tooltip"),u=d3.select("body").classed("is-mobile")||Y<600,l=d3.select(o[i]),h=l.at("transform").split(","),f=r(h,1)+X.top,p=l.parent().at("transform").split(","),d=r(p,0)+X.left+1.2*E,_=e.question_only.replace(/\<br\>\<\/br\>/," ").substring(0,J),y=_.lastIndexOf(" "),v=_.substring(0,y);c.select("p").text(v+"..."),console.log();var x=+s.at("width"),b=+s.at("height"),g=$(".tooltip").width();console.log(g);var m=0,w=0,j=f;u?(m=d<Y/2?x/2-g/2:"auto",w=d<Y/2?"auto":x/2-g/2,j-=b/10,c.st({top:j,left:m,right:w}).st("visibility","visible"),c.on("click",function(){c.st("visibility","hidden"),(0,O.default)(e)})):(m=d<Y/2?d:"auto",w=d<Y/2?"auto":Y-d+X.left+X.right+1.4*E,j-=20,c.st({top:j,left:m,right:w}).classed("is-visible",!0));var M=d3.selectAll(o);M.classed("is-selected",function(t,n){return n===i}),M.filter(function(t,n){return n===i}).raise()}function d(t){var n=t.el,e=d3.select(n),i=e.select(".tooltip"),o=d3.select("body").classed("is-mobile")||Y<600,r=e.selectAll(".post");e.select("svg").on("mouseleave",function(){i.classed("is-visible",!1),r.classed("is-selected",!1)}),o?r.on("click",function(t,e,i){return p({chart:n,datum:t,index:e,nodes:i})}):(r.on("mouseenter",function(t,e,i){return p({chart:n,datum:t,index:e,nodes:i})}),r.on("click",function(t){return(0,O.default)(t)}))}function _(t){L.data(t).on("click",function(t){return(0,O.default)(t)})}function y(t){for(var n=[];n.length<3;){var e=Math.floor(Math.random()*t);n.includes(e)||n.push(e)}return n}function v(t){var n=t.el,e=t.theme,i=d3.select(n),o=i.select(".example__letters");e&&o.at("data-theme",e);var r=o.at("data-theme"),a=i.datum().allData,s=a.filter(function(t){return!r||t.theme===r}),c=y(s.length),u=s.filter(function(t,n){return c.includes(n)}),l=o.selectAll(".example__content").data(u),h=l.enter().append("div.example__content.tk-atlas");h.append("p.example__dearabby.x-small"),h.append("p.example__question.x-small"),h.append("p.example__yeartitle.x-small");var f=h.merge(l);f.select(".example__dearabby").html("<em>Dear Abby,</em>"),f.select(".example__question").html(function(t){return"<span class='highlight'>"+t.question_only.replace(/<br>/g,"").substr(0,140)+"...</span> <a>Read More</a>"}),f.select(".example__yeartitle").html(function(t){var n=t.title.replace(/\b\w/g,function(t){return t.toUpperCase()});return"<em>"+t.year+" - "+n+"</em>"}),d3.selectAll(".example__content").on("click",function(t){return(0,O.default)(t)})}function x(t){var n=t.el;d3.select(n).select(".example__buttons").select(".btn--shuffle").on("click",function(){v({el:n})}),v({el:n})}function b(t,n,e){var i=e[n],o=t.allData,r=t.dataByYear;t.countByYear;l({el:i,allData:o}),h({el:i,dataByYear:r}),d({el:i}),x({el:i})}function g(t){var n,e,i=(n=[]).concat.apply(n,o(t.map(function(t){return t.allData}))),r=(0,M.default)(i.map(function(t){return t.year})).filter(function(t){return t});U.x.domain(r);var a=(e=[]).concat.apply(e,o(t.map(function(t){return t.countByYear})));B=d3.max(a,function(t){return t.value});var s=d3.range(0,B);U.y.domain(s)}function m(t){var n;I=t,s(),console.log(I);var e=[];z.each(function(t,n,i){var o=d3.select(i[n]).at("data-category");e.push("assets/data/histogram_"+o+".csv")}),e.push("assets/data/intro_examples.csv"),e.push("assets/data/tone_lgbt.csv"),(n=d3).loadData.apply(n,e.concat([function(t,n){var e=n.slice(0,n.length-1).map(u);z.data(e.slice(0,3)).each(b),_(e[3].allData),V=!0,g(e.slice(0,3)),c()}]))}Object.defineProperty(n,"__esModule",{value:!0});var w=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},j=e(48),M=i(j),k=e(23),O=i(k),T=e(50),A=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}(T),S=e(115),N=(i(S),!1),P=window.innerWidth,C=P<700,E=0,q=0,B=0,I=void 0,D=d3.select(".histogram"),z=D.selectAll(".histogram__category"),R=d3.select(".prose"),L=R.selectAll("span.example"),W=d3.select(".letter"),U=(new ScrollMagic.Controller,{x:d3.scaleBand().paddingInner(.2),y:d3.scaleBand().paddingInner(.1)}),Y=0,H=0,X={top:12,left:12,right:12,bottom:36},F=600,J=100,V=!1;n.default={init:m,resize:c}},function(t,n,e){(function(t,e){function i(t,n){return!!(t?t.length:0)&&s(t,n,0)>-1}function o(t,n,e){for(var i=-1,o=t?t.length:0;++i<o;)if(e(n,t[i]))return!0;return!1}function r(t,n){for(var e=-1,i=t?t.length:0;++e<i;)if(n(t[e],e,t))return!0;return!1}function a(t,n,e,i){for(var o=t.length,r=e+(i?1:-1);i?r--:++r<o;)if(n(t[r],r,t))return r;return-1}function s(t,n,e){if(n!==n)return a(t,c,e);for(var i=e-1,o=t.length;++i<o;)if(t[i]===n)return i;return-1}function c(t){return t!==t}function u(t){return function(n){return null==n?void 0:n[t]}}function l(t,n){for(var e=-1,i=Array(t);++e<t;)i[e]=n(e);return i}function h(t,n){return t.has(n)}function f(t,n){return null==t?void 0:t[n]}function p(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}function d(t){var n=-1,e=Array(t.size);return t.forEach(function(t,i){e[++n]=[i,t]}),e}function _(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}function y(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}function v(){this.__data__=Jn?Jn(null):{}}function x(t){return this.has(t)&&delete this.__data__[t]}function b(t){var n=this.__data__;if(Jn){var e=n[t];return e===Yt?void 0:e}return Bn.call(n,t)?n[t]:void 0}function g(t){var n=this.__data__;return Jn?void 0!==n[t]:Bn.call(n,t)}function m(t,n){return this.__data__[t]=Jn&&void 0===n?Yt:n,this}function w(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}function j(){this.__data__=[]}function M(t){var n=this.__data__,e=H(n,t);return!(e<0)&&(e==n.length-1?n.pop():Wn.call(n,e,1),!0)}function k(t){var n=this.__data__,e=H(n,t);return e<0?void 0:n[e][1]}function O(t){return H(this.__data__,t)>-1}function T(t,n){var e=this.__data__,i=H(e,t);return i<0?e.push([t,n]):e[i][1]=n,this}function A(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}function S(){this.__data__={hash:new y,map:new(Hn||w),string:new y}}function N(t){return lt(this,t).delete(t)}function P(t){return lt(this,t).get(t)}function C(t){return lt(this,t).has(t)}function E(t,n){return lt(this,t).set(t,n),this}function q(t){var n=-1,e=t?t.length:0;for(this.__data__=new A;++n<e;)this.add(t[n])}function B(t){return this.__data__.set(t,Yt),this}function I(t){return this.__data__.has(t)}function D(t){this.__data__=new w(t)}function z(){this.__data__=new w}function R(t){return this.__data__.delete(t)}function L(t){return this.__data__.get(t)}function W(t){return this.__data__.has(t)}function U(t,n){var e=this.__data__;if(e instanceof w){var i=e.__data__;if(!Hn||i.length<Wt-1)return i.push([t,n]),this;e=this.__data__=new A(i)}return e.set(t,n),this}function Y(t,n){var e=ae(t)||Ot(t)?l(t.length,String):[],i=e.length,o=!!i;for(var r in t)!n&&!Bn.call(t,r)||o&&("length"==r||dt(r,i))||e.push(r);return e}function H(t,n){for(var e=t.length;e--;)if(kt(t[e][0],n))return e;return-1}function X(t,n){n=_t(n,t)?[n]:at(n);for(var e=0,i=n.length;null!=t&&e<i;)t=t[mt(n[e++])];return e&&e==i?t:void 0}function $(t){return In.call(t)}function F(t,n){return null!=t&&n in Object(t)}function J(t,n,e,i,o){return t===n||(null==t||null==n||!Pt(t)&&!Ct(n)?t!==t&&n!==n:V(t,n,J,e,i,o))}function V(t,n,e,i,o,r){var a=ae(t),s=ae(n),c=Vt,u=Vt;a||(c=oe(t),c=c==Jt?on:c),s||(u=oe(n),u=u==Jt?on:u);var l=c==on&&!p(t),h=u==on&&!p(n),f=c==u;if(f&&!l)return r||(r=new D),a||se(t)?st(t,n,e,i,o,r):ct(t,n,c,e,i,o,r);if(!(o&Xt)){var d=l&&Bn.call(t,"__wrapped__"),_=h&&Bn.call(n,"__wrapped__");if(d||_){var y=d?t.value():t,v=_?n.value():n;return r||(r=new D),e(y,v,i,o,r)}}return!!f&&(r||(r=new D),ut(t,n,e,i,o,r))}function G(t,n,e,i){var o=e.length,r=o,a=!i;if(null==t)return!r;for(t=Object(t);o--;){var s=e[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<r;){s=e[o];var c=s[0],u=t[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in t))return!1}else{var h=new D;if(i)var f=i(u,l,c,t,n,h);if(!(void 0===f?J(l,u,i,Ht|Xt,h):f))return!1}}return!0}function Z(t){return!(!Pt(t)||vt(t))&&(St(t)||p(t)?Dn:vn).test(wt(t))}function Q(t){return Ct(t)&&Nt(t.length)&&!!bn[In.call(t)]}function K(t){return"function"==typeof t?t:null==t?zt:"object"==typeof t?ae(t)?et(t[0],t[1]):nt(t):Lt(t)}function tt(t){if(!xt(t))return Un(t);var n=[];for(var e in Object(t))Bn.call(t,e)&&"constructor"!=e&&n.push(e);return n}function nt(t){var n=ht(t);return 1==n.length&&n[0][2]?gt(n[0][0],n[0][1]):function(e){return e===t||G(e,t,n)}}function et(t,n){return _t(t)&&bt(n)?gt(mt(t),n):function(e){var i=Bt(e,t);return void 0===i&&i===n?It(e,t):J(n,i,void 0,Ht|Xt)}}function it(t){return function(n){return X(n,t)}}function ot(t){if("string"==typeof t)return t;if(Et(t))return ee?ee.call(t):"";var n=t+"";return"0"==n&&1/t==-$t?"-0":n}function rt(t,n,e){var r=-1,a=i,s=t.length,c=!0,u=[],l=u;if(e)c=!1,a=o;else if(s>=Wt){var f=n?null:ie(t);if(f)return _(f);c=!1,a=h,l=new q}else l=n?[]:u;t:for(;++r<s;){var p=t[r],d=n?n(p):p;if(p=e||0!==p?p:0,c&&d===d){for(var y=l.length;y--;)if(l[y]===d)continue t;n&&l.push(d),u.push(p)}else a(l,d,e)||(l!==u&&l.push(d),u.push(p))}return u}function at(t){return ae(t)?t:re(t)}function st(t,n,e,i,o,a){var s=o&Xt,c=t.length,u=n.length;if(c!=u&&!(s&&u>c))return!1;var l=a.get(t);if(l&&a.get(n))return l==n;var h=-1,f=!0,p=o&Ht?new q:void 0;for(a.set(t,n),a.set(n,t);++h<c;){var d=t[h],_=n[h];if(i)var y=s?i(_,d,h,n,t,a):i(d,_,h,t,n,a);if(void 0!==y){if(y)continue;f=!1;break}if(p){if(!r(n,function(t,n){if(!p.has(n)&&(d===t||e(d,t,i,o,a)))return p.add(n)})){f=!1;break}}else if(d!==_&&!e(d,_,i,o,a)){f=!1;break}}return a.delete(t),a.delete(n),f}function ct(t,n,e,i,o,r,a){switch(e){case ln:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case un:return!(t.byteLength!=n.byteLength||!i(new Rn(t),new Rn(n)));case Gt:case Zt:case en:return kt(+t,+n);case Qt:return t.name==n.name&&t.message==n.message;case rn:case sn:return t==n+"";case nn:var s=d;case an:var c=r&Xt;if(s||(s=_),t.size!=n.size&&!c)return!1;var u=a.get(t);if(u)return u==n;r|=Ht,a.set(t,n);var l=st(s(t),s(n),i,o,r,a);return a.delete(t),l;case cn:if(ne)return ne.call(t)==ne.call(n)}return!1}function ut(t,n,e,i,o,r){var a=o&Xt,s=Dt(t),c=s.length;if(c!=Dt(n).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in n:Bn.call(n,l)))return!1}var h=r.get(t);if(h&&r.get(n))return h==n;var f=!0;r.set(t,n),r.set(n,t);for(var p=a;++u<c;){l=s[u];var d=t[l],_=n[l];if(i)var y=a?i(_,d,l,n,t,r):i(d,_,l,t,n,r);if(!(void 0===y?d===_||e(d,_,i,o,r):y)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var v=t.constructor,x=n.constructor;v!=x&&"constructor"in t&&"constructor"in n&&!("function"==typeof v&&v instanceof v&&"function"==typeof x&&x instanceof x)&&(f=!1)}return r.delete(t),r.delete(n),f}function lt(t,n){var e=t.__data__;return yt(n)?e["string"==typeof n?"string":"hash"]:e.map}function ht(t){for(var n=Dt(t),e=n.length;e--;){var i=n[e],o=t[i];n[e]=[i,o,bt(o)]}return n}function ft(t,n){var e=f(t,n);return Z(e)?e:void 0}function pt(t,n,e){n=_t(n,t)?[n]:at(n);for(var i,o=-1,r=n.length;++o<r;){var a=mt(n[o]);if(!(i=null!=t&&e(t,a)))break;t=t[a]}if(i)return i;var r=t?t.length:0;return!!r&&Nt(r)&&dt(a,r)&&(ae(t)||Ot(t))}function dt(t,n){return!!(n=null==n?Ft:n)&&("number"==typeof t||xn.test(t))&&t>-1&&t%1==0&&t<n}function _t(t,n){if(ae(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!Et(t))||(fn.test(t)||!hn.test(t)||null!=n&&t in Object(n))}function yt(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}function vt(t){return!!En&&En in t}function xt(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||Pn)}function bt(t){return t===t&&!Pt(t)}function gt(t,n){return function(e){return null!=e&&(e[t]===n&&(void 0!==n||t in Object(e)))}}function mt(t){if("string"==typeof t||Et(t))return t;var n=t+"";return"0"==n&&1/t==-$t?"-0":n}function wt(t){if(null!=t){try{return qn.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function jt(t,n){return t&&t.length?rt(t,K(n,2)):[]}function Mt(t,n){if("function"!=typeof t||n&&"function"!=typeof n)throw new TypeError(Ut);var e=function(){var i=arguments,o=n?n.apply(this,i):i[0],r=e.cache;if(r.has(o))return r.get(o);var a=t.apply(this,i);return e.cache=r.set(o,a),a};return e.cache=new(Mt.Cache||A),e}function kt(t,n){return t===n||t!==t&&n!==n}function Ot(t){return At(t)&&Bn.call(t,"callee")&&(!Ln.call(t,"callee")||In.call(t)==Jt)}function Tt(t){return null!=t&&Nt(t.length)&&!St(t)}function At(t){return Ct(t)&&Tt(t)}function St(t){var n=Pt(t)?In.call(t):"";return n==Kt||n==tn}function Nt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ft}function Pt(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function Ct(t){return!!t&&"object"==typeof t}function Et(t){return"symbol"==typeof t||Ct(t)&&In.call(t)==cn}function qt(t){return null==t?"":ot(t)}function Bt(t,n,e){var i=null==t?void 0:X(t,n);return void 0===i?e:i}function It(t,n){return null!=t&&pt(t,n,F)}function Dt(t){return Tt(t)?Y(t):tt(t)}function zt(t){return t}function Rt(){}function Lt(t){return _t(t)?u(mt(t)):it(t)}var Wt=200,Ut="Expected a function",Yt="__lodash_hash_undefined__",Ht=1,Xt=2,$t=1/0,Ft=9007199254740991,Jt="[object Arguments]",Vt="[object Array]",Gt="[object Boolean]",Zt="[object Date]",Qt="[object Error]",Kt="[object Function]",tn="[object GeneratorFunction]",nn="[object Map]",en="[object Number]",on="[object Object]",rn="[object RegExp]",an="[object Set]",sn="[object String]",cn="[object Symbol]",un="[object ArrayBuffer]",ln="[object DataView]",hn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fn=/^\w*$/,pn=/^\./,dn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_n=/[\\^$.*+?()[\]{}|]/g,yn=/\\(\\)?/g,vn=/^\[object .+?Constructor\]$/,xn=/^(?:0|[1-9]\d*)$/,bn={};bn["[object Float32Array]"]=bn["[object Float64Array]"]=bn["[object Int8Array]"]=bn["[object Int16Array]"]=bn["[object Int32Array]"]=bn["[object Uint8Array]"]=bn["[object Uint8ClampedArray]"]=bn["[object Uint16Array]"]=bn["[object Uint32Array]"]=!0,bn[Jt]=bn[Vt]=bn[un]=bn[Gt]=bn[ln]=bn[Zt]=bn[Qt]=bn[Kt]=bn[nn]=bn[en]=bn[on]=bn[rn]=bn[an]=bn[sn]=bn["[object WeakMap]"]=!1;var gn="object"==typeof t&&t&&t.Object===Object&&t,mn="object"==typeof self&&self&&self.Object===Object&&self,wn=gn||mn||Function("return this")(),jn="object"==typeof n&&n&&!n.nodeType&&n,Mn=jn&&"object"==typeof e&&e&&!e.nodeType&&e,kn=Mn&&Mn.exports===jn,On=kn&&gn.process,Tn=function(){try{return On&&On.binding("util")}catch(t){}}(),An=Tn&&Tn.isTypedArray,Sn=Array.prototype,Nn=Function.prototype,Pn=Object.prototype,Cn=wn["__core-js_shared__"],En=function(){var t=/[^.]+$/.exec(Cn&&Cn.keys&&Cn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),qn=Nn.toString,Bn=Pn.hasOwnProperty,In=Pn.toString,Dn=RegExp("^"+qn.call(Bn).replace(_n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zn=wn.Symbol,Rn=wn.Uint8Array,Ln=Pn.propertyIsEnumerable,Wn=Sn.splice,Un=function(t,n){return function(e){return t(n(e))}}(Object.keys,Object),Yn=ft(wn,"DataView"),Hn=ft(wn,"Map"),Xn=ft(wn,"Promise"),$n=ft(wn,"Set"),Fn=ft(wn,"WeakMap"),Jn=ft(Object,"create"),Vn=wt(Yn),Gn=wt(Hn),Zn=wt(Xn),Qn=wt($n),Kn=wt(Fn),te=zn?zn.prototype:void 0,ne=te?te.valueOf:void 0,ee=te?te.toString:void 0;y.prototype.clear=v,y.prototype.delete=x,y.prototype.get=b,y.prototype.has=g,y.prototype.set=m,w.prototype.clear=j,w.prototype.delete=M,w.prototype.get=k,w.prototype.has=O,w.prototype.set=T,A.prototype.clear=S,A.prototype.delete=N,A.prototype.get=P,A.prototype.has=C,A.prototype.set=E,q.prototype.add=q.prototype.push=B,q.prototype.has=I,D.prototype.clear=z,D.prototype.delete=R,D.prototype.get=L,D.prototype.has=W,D.prototype.set=U;var ie=$n&&1/_(new $n([,-0]))[1]==$t?function(t){return new $n(t)}:Rt,oe=$;(Yn&&oe(new Yn(new ArrayBuffer(1)))!=ln||Hn&&oe(new Hn)!=nn||Xn&&"[object Promise]"!=oe(Xn.resolve())||$n&&oe(new $n)!=an||Fn&&"[object WeakMap]"!=oe(new Fn))&&(oe=function(t){var n=In.call(t),e=n==on?t.constructor:void 0,i=e?wt(e):void 0;if(i)switch(i){case Vn:return ln;case Gn:return nn;case Zn:return"[object Promise]";case Qn:return an;case Kn:return"[object WeakMap]"}return n});var re=Mt(function(t){t=qt(t);var n=[];return pn.test(t)&&n.push(""),t.replace(dn,function(t,e,i,o){n.push(i?o.replace(yn,"$1"):e||t)}),n});Mt.Cache=A;var ae=Array.isArray,se=An?function(t){return function(n){return t(n)}}(An):Q;e.exports=jt}).call(n,e(22),e(49)(t))},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,e){"use strict";function i(){var t=[],n=void 0,e=void 0,i=[],r={},a={},c=!1,u=void 0,l=H,h=void 0,f=void 0,p=Object(s.a)("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),d=void 0,v=function(e){d=e,c||e.selectAll("circle.handle").remove();var s=t.map(function(t){return t.type||(t.type=l),t.disable||(t.disable=i),new _(t)});n=n||new y({annotations:s,accessors:r,accessorsInverse:a,ids:u}),e.selectAll("g").data([n]).enter().append("g").attr("class","annotations");var v=e.select("g.annotations");Q(v,n.annotations,"g","annotation"),v.selectAll("g.annotation").each(function(t){var n=Object(o.d)(this);n.attr("class","annotation"),Q(n,[t],"g","annotation-connector"),Q(n,[t],"g","annotation-subject"),Q(n,[t],"g","annotation-note"),Q(n.select("g.annotation-note"),[t],"g","annotation-note-content"),t.type="[object Object]"===t.type.toString()?t.type:new t.type({a:n,annotation:t,textWrap:h,notePadding:f,editMode:c,dispatcher:p,accessors:r}),t.type.draw(),t.type.drawText&&t.type.drawText()})};return v.json=function(){return console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",n.json),window.copy(JSON.stringify(n.json.map(function(t){return delete t.type,t}))),v},v.update=function(){return t&&n&&(t=n.annotations.map(function(t){return t.type.draw(),t})),v},v.updateText=function(){return n&&(n.updateText(h),t=n.annotations),v},v.updatedAccessors=function(){return n.setPositionWithAccessors(),t=n.annotations,v},v.disable=function(e){return arguments.length?(i=e,n&&(n.updateDisable(i),t=n.annotations),v):i},v.textWrap=function(e){return arguments.length?(h=e,n&&(n.updateTextWrap(h),t=n.annotations),v):h},v.notePadding=function(e){return arguments.length?(f=e,n&&(n.updateNotePadding(f),t=n.annotations),v):f},v.type=function(e,i){return arguments.length?(l=e,n&&(n.annotations.map(function(t){t.type.note&&t.type.note.selectAll("*:not(.annotation-note-content)").remove(),t.type.noteContent&&t.type.noteContent.selectAll("*").remove(),t.type.subject&&t.type.subject.selectAll("*").remove(),t.type.connector&&t.type.connector.selectAll("*").remove(),t.type.typeSettings={},t.type=l,t.subject=i&&i.subject||t.subject,t.connector=i&&i.connector||t.connector,t.note=i&&i.note||t.note}),t=n.annotations),v):l},v.annotations=function(e){if(!arguments.length)return n&&n.annotations||t;if(t=e,n&&n.annotations){t.some(function(t){return!t.type||"[object Object]"!==t.type.toString()})?(n=null,v(d)):n.annotations=t}return v},v.context=function(t){return arguments.length?(e=t,v):e},v.accessors=function(t){return arguments.length?(r=t,v):r},v.accessorsInverse=function(t){return arguments.length?(a=t,v):a},v.ids=function(t){return arguments.length?(u=t,v):u},v.editMode=function(e){return arguments.length?(c=e,d&&d.selectAll("g.annotation").classed("editable",c),n&&(n.editMode(c),t=n.annotations),v):c},v.collection=function(t){return arguments.length?(n=t,v):n},v.on=function(){var t=p.on.apply(p,arguments);return t===p?v:t},v}Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"annotation",function(){return i}),e.d(n,"annotationTypeBase",function(){return L}),e.d(n,"annotationLabel",function(){return Y}),e.d(n,"annotationCallout",function(){return H}),e.d(n,"annotationCalloutCurve",function(){return $}),e.d(n,"annotationCalloutElbow",function(){return X}),e.d(n,"annotationCalloutCircle",function(){return J}),e.d(n,"annotationCalloutRect",function(){return V}),e.d(n,"annotationXYThreshold",function(){return Z}),e.d(n,"annotationBadge",function(){return F}),e.d(n,"annotationCustomType",function(){return W});var o=e(5),r=e(85),a=e(90),s=e(28),c=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),l=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},h=function t(n,e,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,e);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:t(r,e,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},f=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},p=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},d=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)},_=function(){function t(n){var e=n.x,i=void 0===e?0:e,o=n.y,r=void 0===o?0:o,a=n.nx,s=n.ny,u=n.dy,l=void 0===u?0:u,h=n.dx,f=void 0===h?0:h,p=n.color,d=void 0===p?"grey":p,_=n.data,y=n.type,v=n.subject,x=n.connector,b=n.note,g=n.disable,m=n.id,w=n.className;c(this,t),this._dx=void 0!==a?a-i:f,this._dy=void 0!==s?s-r:l,this._x=i,this._y=r,this._color=d,this.id=m,this._className=w||"",this.type=y||"",this.data=_,this.note=b||{},this.connector=x||{},this.subject=v||{},this.disable=g||[]}return u(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),0!==this.type.subject.selectAll(":not(.handle)").nodes().length&&this.type.redrawSubject())}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),0!==this.type.connector.selectAll(":not(.handle)").nodes().length&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(t){this._className=t,this.type.setClassName&&this.type.setClassName()}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(t){this._dx=t,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(t){this._dy=t,this.updateOffset()}},{key:"nx",set:function(t){this._dx=t-this._x,this.updateOffset()}},{key:"ny",set:function(t){this._dy=t-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(t){var n=t.x,e=t.y;this._dx=n,this._dy=e,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(t){var n=t.x,e=t.y;this._x=n,this._y=e,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var t={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(t.data=this.data),this.type&&(t.type=this.type),this._className&&(t.className=this._className),Object.keys(this.connector).length>0&&(t.connector=this.connector),Object.keys(this.subject).length>0&&(t.subject=this.subject),Object.keys(this.note).length>0&&(t.note=this.note),t}}]),t}(),y=function(){function t(n){var e=n.annotations,i=n.accessors,o=n.accessorsInverse;c(this,t),this.accessors=i,this.accessorsInverse=o,this.annotations=e}return u(t,[{key:"clearTypes",value:function(t){this.annotations.forEach(function(n){n.type=void 0,n.subject=t&&t.subject||n.subject,n.connector=t&&t.connector||n.connector,n.note=t&&t.note||n.note})}},{key:"setPositionWithAccessors",value:function(){var t=this;this.annotations.forEach(function(n){n.type.setPositionWithAccessors(t.accessors)})}},{key:"editMode",value:function(t){this.annotations.forEach(function(n){n.type&&(n.type.editMode=t,n.type.updateEditMode())})}},{key:"updateDisable",value:function(t){this.annotations.forEach(function(n){n.disable=t,n.type&&t.forEach(function(t){n.type[t]&&(n.type[t].remove&&n.type[t].remove(),n.type[t]=void 0)})})}},{key:"updateTextWrap",value:function(t){this.annotations.forEach(function(n){n.type&&n.type.updateTextWrap&&n.type.updateTextWrap(t)})}},{key:"updateText",value:function(){this.annotations.forEach(function(t){t.type&&t.type.drawText&&t.type.drawText()})}},{key:"updateNotePadding",value:function(t){this.annotations.forEach(function(n){n.type&&(n.type.notePadding=t)})}},{key:"json",get:function(){var t=this;return this.annotations.map(function(n){var e=n.json;return t.accessorsInverse&&n.data&&(e.data={},Object.keys(t.accessorsInverse).forEach(function(i){e.data[i]=t.accessorsInverse[i]({x:n.x,y:n.y})})),e})}},{key:"noteNodes",get:function(){return this.annotations.map(function(t){return l({},t.type.getNoteBBoxOffset(),{positionX:t.x,positionY:t.y})})}}]),t}(),v=function(t){var n=t.cx,e=void 0===n?0:n,i=t.cy;return{move:{x:e,y:void 0===i?0:i}}},x=function(t){var n=t.cx,e=void 0===n?0:n,i=t.cy,o=void 0===i?0:i,r=t.r1,a=t.r2,s=t.padding,c={move:{x:e,y:o}};return void 0!==r&&(c.r1={x:e+r/Math.sqrt(2),y:o+r/Math.sqrt(2)}),void 0!==a&&(c.r2={x:e+a/Math.sqrt(2),y:o+a/Math.sqrt(2)}),void 0!==s&&(c.padding={x:e+r+s,y:o}),c},b=function(t){var n=t.group,e=t.handles,i=t.r,a=void 0===i?10:i,s=n.selectAll("circle.handle").data(e);s.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(Object(r.a)().container(Object(o.d)("g.annotations").node()).on("start",function(t){return t.start&&t.start(t)}).on("drag",function(t){return t.drag&&t.drag(t)}).on("end",function(t){return t.end&&t.end(t)})),n.selectAll("circle.handle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return t.r||a}).attr("class",function(t){return"handle "+(t.className||"")}),s.exit().remove()},g=function(t,n){return"dynamic"!==t&&"left"!==t&&"right"!==t||(t=n<0?"top":"bottom"),t},m=function(t,n){return"dynamic"!==t&&"top"!==t&&"bottom"!==t||(t=n<0?"right":"left"),t},w=["topBottom","top","bottom"],j=["leftRight","left","right"],M=function(t){var n=t.padding,e=void 0===n?0:n,i=t.bbox,o=void 0===i?{x:0,y:0,width:0,height:0}:i,r=t.align,a=t.orientation,s=t.offset,c=void 0===s?{x:0,y:0}:s,u=-o.x,l=0;return-1!==w.indexOf(a)?(r=m(r,c.x),c.y<0&&"topBottom"===a||"top"===a?l-=o.height+e:l+=e,"middle"===r?u-=o.width/2:"right"===r&&(u-=o.width)):-1!==j.indexOf(a)&&(r=g(r,c.y),c.x<0&&"leftRight"===a||"left"===a?u-=o.width+e:u+=e,"middle"===r?l-=o.height/2:"top"===r&&(l-=o.height)),{x:u,y:l}},k=function(t){var n=t.data,e=t.curve,i=void 0===e?a.c:e,o=t.canvasContext,r=t.className,s=t.classID,c=Object(a.d)().curve(i),u={type:"path",className:r,classID:s,data:n};return o?(c.context(o),u.pathMethods=c):u.attrs={d:c(n)},u},O=function(t){var n=t.data,e=t.canvasContext,i=t.className,o=t.classID,r={type:"path",className:i,classID:o,data:n},s=Object(a.a)().innerRadius(n.innerRadius||0).outerRadius(n.outerRadius||n.radius||2).startAngle(n.startAngle||0).endAngle(n.endAngle||2*Math.PI);return e?(s.context(e),r.pathMethods=lineGen):r.attrs={d:s()},r},T=function(t){var n=t.align,e=t.x,i=void 0===e?0:e,o=t.y,r=void 0===o?0:o,a=t.bbox,s=t.offset;n=g(n,s.y),"top"===n?r-=a.height:"middle"===n&&(r-=a.height/2);var c=[[i,r],[i,r+a.height]];return{components:[k({data:c,className:"note-line"})]}},A=function(t){var n=t.align,e=t.x,i=void 0===e?0:e,o=t.y,r=void 0===o?0:o,a=t.offset,s=t.bbox;n=m(n,a.x),"right"===n?i-=s.width:"middle"===n&&(i-=s.width/2);var c=[[i,r],[i+s.width,r]];return{components:[k({data:c,className:"note-line"})]}},S=function(t){var n=t.type,e=t.subjectType,i=n.annotation,o=i.position,r=i.x-o.x,a=r+i.dx,s=i.y-o.y,c=s+i.dy,u=i.subject;if("circle"===e&&(u.outerRadius||u.radius)){var l=Math.sqrt((r-a)*(r-a)+(s-c)*(s-c)),h=Math.asin(-c/l),f=u.outerRadius||u.radius+(u.radiusPadding||0);r=Math.abs(Math.cos(h)*f)*(a<0?-1:1),s=Math.abs(Math.sin(h)*f)*(c<0?-1:1)}if("rect"===e){var p=u.width,d=u.height;(p>0&&i.dx>0||p<0&&i.dx<0)&&(r=Math.abs(p)>Math.abs(i.dx)?p/2:p),(d>0&&i.dy>0||d<0&&i.dy<0)&&(s=Math.abs(d)>Math.abs(i.dy)?d/2:d),r===p/2&&s===d/2&&(r=a,s=c)}return[[r,s],[a,c]]},N=function(t){var n=S(t);return{components:[k({data:n,className:"connector"})]}},P=function(t){var n=t.type,e=t.subjectType,i=n.annotation,o=i.position,r=i.x-o.x,a=r+i.dx,s=i.y-o.y,c=s+i.dy,u=i.subject;if("rect"===e){var l=u.width,h=u.height;(l>0&&i.dx>0||l<0&&i.dx<0)&&(r=Math.abs(l)>Math.abs(i.dx)?l/2:l),(h>0&&i.dy>0||h<0&&i.dy<0)&&(s=Math.abs(h)>Math.abs(i.dy)?h/2:h),r===l/2&&s===h/2&&(r=a,s=c)}var f=[[r,s],[a,c]],p=c-s,d=a-r,_=a,y=c,v=c<s&&a>r||a<r&&c>s?-1:1;if(Math.abs(d)<Math.abs(p)?(_=a,y=s+d*v):(y=c,_=r+p*v),"circle"===e&&(u.outerRadius||u.radius)){var x=(u.outerRadius||u.radius)+(u.radiusPadding||0),b=x/Math.sqrt(2);if(Math.abs(d)>b&&Math.abs(p)>b)r=b*(a<0?-1:1),s=b*(c<0?-1:1),f=[[r,s],[_,y],[a,c]];else if(Math.abs(d)>Math.abs(p)){var g=Math.asin(-c/x);r=Math.abs(Math.cos(g)*x)*(a<0?-1:1),f=[[r,c],[a,c]]}else{var m=Math.acos(a/x);s=Math.abs(Math.sin(m)*x)*(c<0?-1:1),f=[[a,s],[a,c]]}}else f=[[r,s],[_,y],[a,c]];return{components:[k({data:f,className:"connector"})]}},C=function(t){var n=t.type,e=t.connectorData,i=t.subjectType;e||(e={}),e.points&&"number"!=typeof e.points||(e.points=E(n.annotation.offset,e.points)),e.curve||(e.curve=a.b);var r=[];if(n.editMode){var s=e.points.map(function(t,n){return l({},v({cx:t[0],cy:t[1]}),{index:n})}),c=function(t){e.points[t][0]+=o.b.dx,e.points[t][1]+=o.b.dy,n.redrawConnector()};r=n.mapHandles(s.map(function(t){return l({},t.move,{drag:c.bind(n,t.index)})}))}var u=S({type:n,subjectType:i});return u=[u[0]].concat(d(e.points),[u[1]]),{components:[k({data:u,curve:e.curve,className:"connector"})],handles:r}},E=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,e={x:t.x/(n+1),y:t.y/(n+1)},i=[],o=1;o<=n;o++)i.push([e.x*o+o%2*20,e.y*o-o%2*20]);return i},q=function(t){var n=t.annotation,e=t.start,i=t.end,o=t.scale,r=void 0===o?1:o,a=n.position;e=e?[-i[0]+e[0],-i[1]+e[1]]:[n.dx,n.dy],i||(i=[n.x-a.x,n.y-a.y]);var s=i[0],c=i[1],u=e[0],l=e[1],h=10*r,f=16/180*Math.PI,p=Math.atan(l/u);u<0&&(p+=Math.PI);var d=[[s,c],[Math.cos(p+f)*h+s,Math.sin(p+f)*h+c],[Math.cos(p-f)*h+s,Math.sin(p-f)*h+c],[s,c]];return{components:[k({data:d,className:"connector-end connector-arrow",classID:"connector-end"})]}},B=function(t){var n=t.line,e=t.scale,i=void 0===e?1:e,o=O({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(i)}});return o.attrs.transform="translate("+n.data[0][0]+", "+n.data[0][1]+")",{components:[o]}},I=function(t){var n=t.subjectData,e=t.type;n.radius||n.outerRadius||(n.radius=20);var i=[],r=O({data:n,className:"subject"});if(e.editMode){var a=x({r1:r.data.outerRadius||r.data.radius,r2:r.data.innerRadius,padding:n.radiusPadding}),s=function(t){var i=n[t]+o.b.dx*Math.sqrt(2);n[t]=i,e.redrawSubject(),e.redrawConnector()},c=[l({},a.r1,{drag:s.bind(e,void 0!==n.outerRadius?"outerRadius":"radius")})];n.innerRadius&&c.push(l({},a.r2,{drag:s.bind(e,"innerRadius")})),i=e.mapHandles(c)}return r.attrs["fill-opacity"]=0,{components:[r],handles:i}},D=function(t){var n=t.subjectData,e=t.type;n.width||(n.width=100),n.height||(n.height=100);var i=[],r=n.width,a=n.height,s=[[0,0],[r,0],[r,a],[0,a],[0,0]],c=k({data:s,className:"subject"});if(e.editMode){var u=function(){n.width=o.b.x,e.redrawSubject(),e.redrawConnector()},l=function(){n.height=o.b.y,e.redrawSubject(),e.redrawConnector()},h=[{x:r,y:a/2,drag:u.bind(e)},{x:r/2,y:a,drag:l.bind(e)}];i=e.mapHandles(h)}return c.attrs["fill-opacity"]=.1,{components:[c],handles:i}},z=function(t){var n=t.subjectData,e=t.type,i=e.annotation.position,o=(void 0!==n.x1?n.x1:i.x)-i.x,r=(void 0!==n.x2?n.x2:i.x)-i.x,a=(void 0!==n.y1?n.y1:i.y)-i.y,s=(void 0!==n.y2?n.y2:i.y)-i.y;return{components:[k({data:[[o,a],[r,s]],className:"subject"})]}},R=function(t){var n=t.subjectData,e=void 0===n?{}:n,i=t.type,r=void 0===i?{}:i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r.typeSettings&&r.typeSettings.subject;e.radius||(s&&s.radius?e.radius=s.radius:e.radius=14),e.x||s&&s.x&&(e.x=s.x),e.y||s&&s.y&&(e.y=s.y);var c=[],u=[],l=e.radius,h=.7*l,f=0,p=0,d=Math.sqrt(2)*l,_={xleftcorner:-l,xrightcorner:l,ytopcorner:-l,ybottomcorner:l,xleft:-d,xright:d,ytop:-d,ybottom:d};e.x&&!e.y?f=_["x"+e.x]:e.y&&!e.x?p=_["y"+e.y]:e.x&&e.y&&(f=_["x"+e.x+"corner"],p=_["y"+e.y+"corner"]);var y="translate("+f+", "+p+")",v=O({className:"subject",data:{radius:l}});v.attrs.transform=y,v.attrs.fill=a.color,v.attrs["stroke-linecap"]="round",v.attrs["stroke-width"]="3px";var x=O({className:"subject-ring",data:{outerRadius:l,innerRadius:h}});x.attrs.transform=y,x.attrs["stroke-width"]="3px",x.attrs.fill="white";var b=void 0;if(f&&p||!f&&!p)b=k({className:"subject-pointer",data:[[0,0],[f||0,0],[0,p||0],[0,0]]});else if(f||p){var g=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t&&t/Math.sqrt(2)/Math.sqrt(2)||n*l/Math.sqrt(2)};b=k({className:"subject-pointer",data:[[0,0],[g(f),g(p)],[g(f,-1),g(p,-1)],[0,0]]})}if(b&&(b.attrs.fill=a.color,b.attrs["stroke-linecap"]="round",b.attrs["stroke-width"]="3px",u.push(b)),r.editMode){var m=function(){e.x=o.b.x<2*-l?"left":o.b.x>2*l?"right":void 0,e.y=o.b.y<2*-l?"top":o.b.y>2*l?"bottom":void 0,r.redrawSubject()},w={x:2*f,y:2*p,drag:m.bind(r)};w.x||w.y||(w.y=-l),c=r.mapHandles([w])}var j=void 0;return e.text&&(j={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:e.text,"text-anchor":"middle",dy:".25em",x:f,y:p}}),u.push(v),u.push(x),u.push(j),{components:u,handles:c}},L=function(){function t(n){var e=n.a,i=n.annotation,o=n.editMode,r=n.dispatcher,a=n.notePadding,s=n.accessors;if(c(this,t),this.a=e,this.note=-1===i.disable.indexOf("note")&&e.select("g.annotation-note"),this.noteContent=this.note&&e.select("g.annotation-note-content"),this.connector=-1===i.disable.indexOf("connector")&&e.select("g.annotation-connector"),this.subject=-1===i.disable.indexOf("subject")&&e.select("g.annotation-subject"),this.dispatcher=r,r){var u=K.bind(null,r,i);u({component:this.note,name:"note"}),u({component:this.connector,name:"connector"}),u({component:this.subject,name:"subject"})}this.annotation=i,this.editMode=i.editMode||o,this.notePadding=void 0!==a?a:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&i.data&&this.init(s)}return u(t,[{key:"init",value:function(t){this.annotation.x||this.mapX(t),this.annotation.y||this.mapY(t)}},{key:"mapY",value:function(t){t.y&&(this.annotation.y=t.y(this.annotation.data))}},{key:"mapX",value:function(t){t.x&&(this.annotation.x=t.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(t,n){var e=this;Array.isArray(n)||(n=[n]),n.filter(function(t){return t}).forEach(function(n){var i=n.type,o=n.className,r=n.attrs,a=n.handles,s=n.classID;if("handle"===i)b({group:t,r:r&&r.r,handles:a});else{Q(t,[e.annotation],i,o,s);for(var c=t.select(i+"."+(s||o)),u=Object.keys(r),l=[],h=c.node().attributes,f=h.length-1;f>=0;f--){var p=h[f].name;-1===u.indexOf(p)&&"class"!==p&&l.push(p)}u.forEach(function(t){"text"===t?c.text(r[t]):c.attr(t,r[t])}),l.forEach(function(t){return c.attr(t,null)})}})}},{key:"getNoteBBox",value:function(){return nt(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var t=nt(this.note,".annotation-note-content"),n=this.noteContent.attr("transform").split(/\(|\,|\)/g);return t.offsetCornerX=parseFloat(n[1])+this.annotation.dx,t.offsetCornerY=parseFloat(n[2])+this.annotation.dy,t.offsetX=this.annotation.dx,t.offsetY=this.annotation.dy,t}},{key:"drawSubject",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.annotation.subject,i=n.type,o={type:this,subjectData:e},r={};"circle"===i?r=I(o):"rect"===i?r=D(o):"threshold"===i?r=z(o):"badge"===i&&(r=R(o,this.annotation));var a=r,s=a.components,c=void 0===s?[]:s,u=a.handles,l=void 0===u?[]:u;return c.forEach(function(n){n&&n.attrs&&!n.attrs.stroke&&(n.attrs.stroke=t.annotation.color)}),this.editMode&&(l=l.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),c.push({type:"handle",handles:l})),c}},{key:"drawConnector",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.annotation.connector,i=e.type||n.type,o={type:this,connectorData:e};o.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var r={};r="curve"===i?C(o):"elbow"===i?P(o):N(o);var a=r,s=a.components,c=void 0===s?[]:s,u=a.handles,l=void 0===u?[]:u,h=c[0];h&&(h.attrs.stroke=this.annotation.color,h.attrs.fill="none");var f=e.end||n.end,p={};if("arrow"===f){var d=h.data[1],_=h.data[0];Math.sqrt(Math.pow(d[0]-_[0],2)+Math.pow(d[1]-_[1],2))<5&&h.data[2]&&(d=h.data[2]),p=q({annotation:this.annotation,start:d,end:_,scale:e.endScale})}else"dot"===f&&(p=B({line:h,scale:e.endScale}));return p.components&&(p.components.forEach(function(n){n.attrs.fill=t.annotation.color,n.attrs.stroke=t.annotation.color}),c=c.concat(p.components)),this.editMode&&0!==l.length&&c.push({type:"handle",handles:l}),c}},{key:"drawNote",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.annotation.note,i=e.align||n.align||"dynamic",o={bbox:n.bbox,align:i,offset:this.annotation.offset},r=e.lineType||n.lineType,a={};"vertical"===r?a=T(o):"horizontal"===r&&(a=A(o));var s=a,c=s.components,u=void 0===c?[]:c,l=s.handles,h=void 0===l?[]:l;return u.forEach(function(n){n.attrs.stroke=t.annotation.color}),this.editMode&&(h=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),u.push({type:"handle",handles:h})),u}},{key:"drawNoteContent",value:function(t){var n=this.annotation.note,e=void 0!==n.padding?n.padding:this.notePadding,i=n.orientation||t.orientation||"topBottom",o=n.lineType||t.lineType,r=n.align||t.align||"dynamic";"vertical"===o?i="leftRight":"horizontal"===o&&(i="topBottom");var a={padding:e,bbox:t.bbox,offset:this.annotation.offset,orientation:i,align:r},s=M(a),c=s.x,u=s.y;return this.offsetCornerX=c+this.annotation.dx,this.offsetCornerY=u+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+c+", "+u+")"),[]}},{key:"drawOnScreen",value:function(t,n){return this.drawOnSVG(t,n)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:t})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:t}))}},{key:"setPosition",value:function(){var t=this.annotation.position;this.a.attr("transform","translate("+t.x+", "+t.y+")")}},{key:"setOffset",value:function(){if(this.note){var t=this.annotation.offset;this.note.attr("transform","translate("+t.x+", "+t.y+")")}}},{key:"setPositionWithAccessors",value:function(t){t&&this.annotation.data&&(this.mapX(t),this.mapY(t)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){o.b.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var t=this.annotation.position;t.x+=o.b.dx,t.y+=o.b.dy,this.annotation.position=t}},{key:"dragNote",value:function(){var t=this.annotation.offset;t.x+=o.b.dx,t.y+=o.b.dy,this.annotation.offset=t}},{key:"mapHandles",value:function(t){var n=this;return t.map(function(t){return l({},t,{start:n.dragstarted.bind(n),end:n.dragended.bind(n)})})}}]),t}(),W=function(t,n,e){return function(t){function i(t){c(this,i);var e=p(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return e.typeSettings=n,n.disable&&n.disable.forEach(function(t){e[t]=void 0,"note"===t&&(e.noteContent=void 0)}),e}return f(i,t),u(i,[{key:"className",value:function(){return""+(n.className||h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"className",this)&&h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(t){return this.typeSettings.subject=l({},n.subject,this.typeSettings.subject),h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"drawSubject",this).call(this,l({},t,this.typeSettings.subject))}},{key:"drawConnector",value:function(t){return this.typeSettings.connector=l({},n.connector,this.typeSettings.connector),h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"drawConnector",this).call(this,l({},t,n.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(t){return this.typeSettings.note=l({},n.note,this.typeSettings.note),h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"drawNote",this).call(this,l({},t,n.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(t){return h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"drawNoteContent",this).call(this,l({},t,n.note,this.typeSettings.note))}}],[{key:"init",value:function(t,n){return h(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,t,n),e&&(t=e(t,n)),t}}]),i}(t)},U=function(t){function n(t){c(this,n);var e=p(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.textWrap=t.textWrap||120,e.drawText(),e}return f(n,t),u(n,[{key:"updateTextWrap",value:function(t){this.textWrap=t,this.drawText()}},{key:"drawText",value:function(){if(this.note){Q(this.note,[this.annotation],"g","annotation-note-content");var t=this.note.select("g.annotation-note-content");Q(t,[this.annotation],"rect","annotation-note-bg"),Q(t,[this.annotation],"text","annotation-note-label"),Q(t,[this.annotation],"text","annotation-note-title");var n={height:0},e=this.a.select("text.annotation-note-label"),i=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,o=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter;if(this.annotation.note.title){var r=this.a.select("text.annotation-note-title");r.text(this.annotation.note.title),r.attr("fill",this.annotation.color),r.attr("font-weight","bold"),r.call(tt,i,o),n=r.node().getBBox()}e.text(this.annotation.note.label).attr("dx","0"),e.call(tt,i,o),e.attr("y",1.1*n.height||0),e.attr("fill",this.annotation.color);var a=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",a.width).attr("height",a.height).attr("x",a.x).attr("fill","white").attr("fill-opacity",0)}}}]),n}(L),Y=W(U,{className:"label",note:{align:"middle"}}),H=W(U,{className:"callout",note:{lineType:"horizontal"}}),X=W(H,{className:"callout elbow",connector:{type:"elbow"}}),$=W(H,{className:"callout curve",connector:{type:"curve"}}),F=W(L,{className:"badge",subject:{type:"badge"},disable:["connector","note"]}),J=W(X,{className:"callout circle",subject:{type:"circle"}}),V=W(X,{className:"callout rect",subject:{type:"rect"}}),G=function(t){function n(){return c(this,n),p(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return f(n,t),u(n,[{key:"mapY",value:function(t){h(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"mapY",this).call(this,t);var e=this.annotation;(e.subject.x1||e.subject.x2)&&e.data&&t.y&&(e.y=t.y(e.data)),!e.subject.x1&&!e.subject.x2||e.x||(e.x=e.subject.x1||e.subject.x2)}},{key:"mapX",value:function(t){h(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"mapX",this).call(this,t);var e=this.annotation;(e.subject.y1||e.subject.y2)&&e.data&&t.x&&(e.x=t.x(e.data)),!e.subject.y1&&!e.subject.y2||e.y||(e.y=e.subject.y1||e.subject.y2)}}]),n}(H),Z=W(G,{className:"callout xythreshold",subject:{type:"threshold"}}),Q=function(t,n,e,i,o){var r=t.selectAll(e+"."+(o||i)).data(n);return r.enter().append(e).merge(r).attr("class",i),r.exit().remove(),t},K=function(t,n,e){var i=e.component,o=e.name;i&&i.on("mouseover.annotations",function(){t.call(o+"over",i,n)}).on("mouseout.annotations",function(){return t.call(o+"out",i,n)}).on("click.annotations",function(){return t.call(o+"click",i,n)})},tt=function(t,n,e){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;t.each(function(){for(var t=Object(o.d)(this),r=t.text().split(e||/[ \t\r\n]+/).reverse().filter(function(t){return""!==t}),a=void 0,s=[],c=t.text(null).append("tspan").attr("x",0).attr("dy","0.8em");a=r.pop();)s.push(a),c.text(s.join(" ")),c.node().getComputedTextLength()>n&&s.length>1&&(s.pop(),c.text(s.join(" ")),s=[a],c=t.append("tspan").attr("x",0).attr("dy",i+"em").text(a))})},nt=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":not(.handle)";return t?t.selectAll(n).nodes().reduce(function(t,n){var e=n.getBBox();t.x=Math.min(t.x,e.x),t.y=Math.min(t.y,e.y),t.width=Math.max(t.width,e.width);var i=n&&n.attributes&&n.attributes.y;return t.height=Math.max(t.height,(i&&parseFloat(i.value)||0)+e.height),t},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}},et={annotation:i,annotationTypeBase:L,annotationLabel:Y,annotationCallout:H,annotationCalloutCurve:$,annotationCalloutElbow:X,annotationCalloutCircle:J,annotationCalloutRect:V,annotationXYThreshold:Z,annotationBadge:F,annotationCustomType:W};n.default=et},function(t,n,e){"use strict";function i(){return new o}function o(){this._="@"+(++r).toString(36)}var r=0;o.prototype=i.prototype={constructor:o,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}},function(t,n,e){"use strict";var i=e(14),o=e(16);n.a=function(t){var n=Object(i.a)();return n.changedTouches&&(n=n.changedTouches[0]),Object(o.a)(t,n)}},function(t,n,e){"use strict";var i=e(0);n.a=function(t){return"string"==typeof t?new i.a([[document.querySelector(t)]],[document.documentElement]):new i.a([[t]],i.b)}},function(t,n,e){"use strict";var i=e(0),o=e(17);n.a=function(t){"function"!=typeof t&&(t=Object(o.a)(t));for(var n=this._groups,e=n.length,r=new Array(e),a=0;a<e;++a)for(var s,c,u=n[a],l=u.length,h=r[a]=new Array(l),f=0;f<l;++f)(s=u[f])&&(c=t.call(s,s.__data__,f,u))&&("__data__"in s&&(c.__data__=s.__data__),h[f]=c);return new i.a(r,this._parents)}},function(t,n,e){"use strict";var i=e(0),o=e(25);n.a=function(t){"function"!=typeof t&&(t=Object(o.a)(t));for(var n=this._groups,e=n.length,r=[],a=[],s=0;s<e;++s)for(var c,u=n[s],l=u.length,h=0;h<l;++h)(c=u[h])&&(r.push(t.call(c,c.__data__,h,u)),a.push(c));return new i.a(r,a)}},function(t,n,e){"use strict";var i=e(0),o=e(24);n.a=function(t){"function"!=typeof t&&(t=Object(o.a)(t));for(var n=this._groups,e=n.length,r=new Array(e),a=0;a<e;++a)for(var s,c=n[a],u=c.length,l=r[a]=[],h=0;h<u;++h)(s=c[h])&&t.call(s,s.__data__,h,c)&&l.push(s);return new i.a(r,this._parents)}},function(t,n,e){"use strict";function i(t,n,e,i,o,r){for(var s,c=0,u=n.length,l=r.length;c<l;++c)(s=n[c])?(s.__data__=r[c],i[c]=s):e[c]=new a.a(t,r[c]);for(;c<u;++c)(s=n[c])&&(o[c]=s)}function o(t,n,e,i,o,r,s){var u,l,h,f={},p=n.length,d=r.length,_=new Array(p);for(u=0;u<p;++u)(l=n[u])&&(_[u]=h=c+s.call(l,l.__data__,u,n),h in f?o[u]=l:f[h]=l);for(u=0;u<d;++u)h=c+s.call(t,r[u],u,r),(l=f[h])?(i[u]=l,l.__data__=r[u],f[h]=null):e[u]=new a.a(t,r[u]);for(u=0;u<p;++u)(l=n[u])&&f[_[u]]===l&&(o[u]=l)}var r=e(0),a=e(26),s=e(58),c="$";n.a=function(t,n){if(!t)return v=new Array(this.size()),p=-1,this.each(function(t){v[++p]=t}),v;var e=n?o:i,a=this._parents,c=this._groups;"function"!=typeof t&&(t=Object(s.a)(t));for(var u=c.length,l=new Array(u),h=new Array(u),f=new Array(u),p=0;p<u;++p){var d=a[p],_=c[p],y=_.length,v=t.call(d,d&&d.__data__,p,a),x=v.length,b=h[p]=new Array(x),g=l[p]=new Array(x);e(d,_,b,g,f[p]=new Array(y),v,n);for(var m,w,j=0,M=0;j<x;++j)if(m=b[j]){for(j>=M&&(M=j+1);!(w=g[M])&&++M<x;);m._next=w||null}}return l=new r.a(l,a),l._enter=h,l._exit=f,l}},function(t,n,e){"use strict";n.a=function(t){return function(){return t}}},function(t,n,e){"use strict";var i=e(27),o=e(0);n.a=function(){return new o.a(this._exit||this._groups.map(i.a),this._parents)}},function(t,n,e){"use strict";var i=e(0);n.a=function(t){for(var n=this._groups,e=t._groups,o=n.length,r=e.length,a=Math.min(o,r),s=new Array(o),c=0;c<a;++c)for(var u,l=n[c],h=e[c],f=l.length,p=s[c]=new Array(f),d=0;d<f;++d)(u=l[d]||h[d])&&(p[d]=u);for(;c<o;++c)s[c]=n[c];return new i.a(s,this._parents)}},function(t,n,e){"use strict";n.a=function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var i,o=t[n],r=o.length-1,a=o[r];--r>=0;)(i=o[r])&&(a&&a!==i.nextSibling&&a.parentNode.insertBefore(i,a),a=i);return this}},function(t,n,e){"use strict";function i(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}var o=e(0);n.a=function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=i);for(var e=this._groups,r=e.length,a=new Array(r),s=0;s<r;++s){for(var c,u=e[s],l=u.length,h=a[s]=new Array(l),f=0;f<l;++f)(c=u[f])&&(h[f]=c);h.sort(n)}return new o.a(a,this._parents).order()}},function(t,n,e){"use strict";n.a=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}},function(t,n,e){"use strict";n.a=function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t}},function(t,n,e){"use strict";n.a=function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],o=0,r=i.length;o<r;++o){var a=i[o];if(a)return a}return null}},function(t,n,e){"use strict";n.a=function(){var t=0;return this.each(function(){++t}),t}},function(t,n,e){"use strict";n.a=function(){return!this.node()}},function(t,n,e){"use strict";n.a=function(t){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var o,r=n[e],a=0,s=r.length;a<s;++a)(o=r[a])&&t.call(o,o.__data__,a,r);return this}},function(t,n,e){"use strict";function i(t){return function(){this.removeAttribute(t)}}function o(t){return function(){this.removeAttributeNS(t.space,t.local)}}function r(t,n){return function(){this.setAttribute(t,n)}}function a(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function s(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function c(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}var u=e(12);n.a=function(t,n){var e=Object(u.a)(t);if(arguments.length<2){var l=this.node();return e.local?l.getAttributeNS(e.space,e.local):l.getAttribute(e)}return this.each((null==n?e.local?o:i:"function"==typeof n?e.local?c:s:e.local?a:r)(e,n))}},function(t,n,e){"use strict";function i(t){return function(){this.style.removeProperty(t)}}function o(t,n,e){return function(){this.style.setProperty(t,n,e)}}function r(t,n,e){return function(){var i=n.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,e)}}var a=e(18);n.a=function(t,n,e){var s;return arguments.length>1?this.each((null==n?i:"function"==typeof n?r:o)(t,n,null==e?"":e)):Object(a.a)(s=this.node()).getComputedStyle(s,null).getPropertyValue(t)}},function(t,n,e){"use strict";function i(t){return function(){delete this[t]}}function o(t,n){return function(){this[t]=n}}function r(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}n.a=function(t,n){return arguments.length>1?this.each((null==n?i:"function"==typeof n?r:o)(t,n)):this.node()[t]}},function(t,n,e){"use strict";function i(t){return t.trim().split(/^|\s+/)}function o(t){return t.classList||new r(t)}function r(t){this._node=t,this._names=i(t.getAttribute("class")||"")}function a(t,n){for(var e=o(t),i=-1,r=n.length;++i<r;)e.add(n[i])}function s(t,n){for(var e=o(t),i=-1,r=n.length;++i<r;)e.remove(n[i])}function c(t){return function(){a(this,t)}}function u(t){return function(){s(this,t)}}function l(t,n){return function(){(n.apply(this,arguments)?a:s)(this,t)}}r.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}},n.a=function(t,n){var e=i(t+"");if(arguments.length<2){for(var r=o(this.node()),a=-1,s=e.length;++a<s;)if(!r.contains(e[a]))return!1;return!0}return this.each(("function"==typeof n?l:n?c:u)(e,n))}},function(t,n,e){"use strict";function i(){this.textContent=""}function o(t){return function(){this.textContent=t}}function r(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}n.a=function(t){return arguments.length?this.each(null==t?i:("function"==typeof t?r:o)(t)):this.node().textContent}},function(t,n,e){"use strict";function i(){this.innerHTML=""}function o(t){return function(){this.innerHTML=t}}function r(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}n.a=function(t){return arguments.length?this.each(null==t?i:("function"==typeof t?r:o)(t)):this.node().innerHTML}},function(t,n,e){"use strict";function i(){this.nextSibling&&this.parentNode.appendChild(this)}n.a=function(){return this.each(i)}},function(t,n,e){"use strict";function i(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}n.a=function(){return this.each(i)}},function(t,n,e){"use strict";var i=e(11);n.a=function(t){var n="function"==typeof t?t:Object(i.a)(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}},function(t,n,e){"use strict";function i(){return null}var o=e(11),r=e(17);n.a=function(t,n){var e="function"==typeof t?t:Object(o.a)(t),a=null==n?i:"function"==typeof n?n:Object(r.a)(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),a.apply(this,arguments)||null)})}},function(t,n,e){"use strict";function i(){var t=this.parentNode;t&&t.removeChild(this)}n.a=function(){return this.each(i)}},function(t,n,e){"use strict";n.a=function(t){return arguments.length?this.property("__data__",t):this.node().__data__}},function(t,n,e){"use strict";function i(t,n,e){var i=Object(a.a)(t),o=i.CustomEvent;o?o=new o(n,e):(o=i.document.createEvent("Event"),e?(o.initEvent(n,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(n,!1,!1)),t.dispatchEvent(o)}function o(t,n){return function(){return i(this,t,n)}}function r(t,n){return function(){return i(this,t,n.apply(this,arguments))}}var a=e(18);n.a=function(t,n){return this.each(("function"==typeof n?r:o)(t,n))}},function(t,n,e){"use strict";e(0)},function(t,n,e){"use strict";var i=e(14),o=e(16);n.a=function(t,n,e){arguments.length<3&&(e=n,n=Object(i.a)().changedTouches);for(var r,a=0,s=n?n.length:0;a<s;++a)if((r=n[a]).identifier===e)return Object(o.a)(t,r);return null}},function(t,n,e){"use strict";e(14),e(16)},function(t,n,e){"use strict";var i=e(86);e.d(n,"a",function(){return i.a});e(29)},function(t,n,e){"use strict";function i(){return!s.b.button}function o(){return this.parentNode}function r(t){return null==t?{x:s.b.x,y:s.b.y}:t}var a=e(28),s=e(5),c=e(29),u=e(30),l=e(88),h=e(89);n.a=function(){function t(t){t.on("mousedown.drag",n).on("touchstart.drag",p).on("touchmove.drag",d).on("touchend.drag touchcancel.drag",_).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){if(!x&&b.apply(this,arguments)){var t=y("mouse",g.apply(this,arguments),s.c,this,arguments);t&&(Object(s.d)(s.b.view).on("mousemove.drag",e,!0).on("mouseup.drag",f,!0),Object(c.a)(s.b.view),Object(u.b)(),v=!1,t("start"))}}function e(){Object(u.a)(),v=!0,w.mouse("drag")}function f(){Object(s.d)(s.b.view).on("mousemove.drag mouseup.drag",null),Object(c.b)(s.b.view,v),Object(u.a)(),w.mouse("end")}function p(){if(b.apply(this,arguments)){var t,n,e=s.b.changedTouches,i=g.apply(this,arguments),o=e.length;for(t=0;t<o;++t)(n=y(e[t].identifier,i,s.e,this,arguments))&&(Object(u.b)(),n("start"))}}function d(){var t,n,e=s.b.changedTouches,i=e.length;for(t=0;t<i;++t)(n=w[e[t].identifier])&&(Object(u.a)(),n("drag"))}function _(){var t,n,e=s.b.changedTouches,i=e.length;for(x&&clearTimeout(x),x=setTimeout(function(){x=null},500),t=0;t<i;++t)(n=w[e[t].identifier])&&(Object(u.b)(),n("end"))}function y(n,e,i,o,r){var a,c,u,l=i(e,n),f=j.copy();if(Object(s.a)(new h.a(t,"beforestart",a,n,M,l[0],l[1],0,0,f),function(){return null!=(s.b.subject=a=m.apply(o,r))&&(c=a.x-l[0]||0,u=a.y-l[1]||0,!0)}))return function p(d){var _,y=l;switch(d){case"start":w[n]=p,_=M++;break;case"end":delete w[n],--M;case"drag":l=i(e,n),_=M}Object(s.a)(new h.a(t,d,a,n,_,l[0]+c,l[1]+u,l[0]-y[0],l[1]-y[1],f),f.apply,f,[d,o,r])}}var v,x,b=i,g=o,m=r,w={},j=Object(a.a)("start","drag","end"),M=0;return t.filter=function(n){return arguments.length?(b="function"==typeof n?n:Object(l.a)(!!n),t):b},t.container=function(n){return arguments.length?(g="function"==typeof n?n:Object(l.a)(n),t):g},t.subject=function(n){return arguments.length?(m="function"==typeof n?n:Object(l.a)(n),t):m},t.on=function(){var n=j.on.apply(j,arguments);return n===j?t:n},t}},function(t,n,e){"use strict";function i(){for(var t,n=0,e=arguments.length,i={};n<e;++n){if(!(t=arguments[n]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new o(i)}function o(t){this._=t}function r(t,n){return t.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");if(i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}function a(t,n){for(var e,i=0,o=t.length;i<o;++i)if((e=t[i]).name===n)return e.value}function s(t,n,e){for(var i=0,o=t.length;i<o;++i)if(t[i].name===n){t[i]=c,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=e&&t.push({name:n,value:e}),t}var c={value:function(){}};o.prototype=i.prototype={constructor:o,on:function(t,n){var e,i=this._,o=r(t+"",i),c=-1,u=o.length;{if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++c<u;)if(e=(t=o[c]).type)i[e]=s(i[e],t.name,n);else if(null==n)for(e in i)i[e]=s(i[e],t.name,null);return this}for(;++c<u;)if((e=(t=o[c]).type)&&(e=a(i[e],t.name)))return e}},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new o(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,i,o=new Array(e),r=0;r<e;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,e=i.length;r<e;++r)i[r].value.apply(n,o)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(n,e)}},n.a=i},function(t,n,e){"use strict";n.a=function(t){return function(){return t}}},function(t,n,e){"use strict";function i(t,n,e,i,o,r,a,s,c,u){this.target=t,this.type=n,this.subject=e,this.identifier=i,this.active=o,this.x=r,this.y=a,this.dx=s,this.dy=c,this._=u}n.a=i,i.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t}},function(t,n,e){"use strict";var i=e(91);e.d(n,"a",function(){return i.a});var o=(e(31),e(19));e.d(n,"d",function(){return o.a});var r=(e(93),e(96),e(34),e(97),e(35),e(36),e(37),e(39),e(38),e(40),e(41),e(98),e(99),e(9),e(100),e(42),e(43),e(10),e(101),e(102),e(20));e.d(n,"b",function(){return r.a});var a=(e(103),e(7));e.d(n,"c",function(){return a.a});e(104),e(105),e(106),e(107),e(109),e(3),e(110),e(111),e(21),e(112),e(113),e(4),e(114)},function(t,n,e){"use strict";function i(t){return t.innerRadius}function o(t){return t.outerRadius}function r(t){return t.startAngle}function a(t){return t.endAngle}function s(t){return t&&t.padAngle}function c(t){return t>=1?p.b:t<=-1?-p.b:Math.asin(t)}function u(t,n,e,i,o,r,a,s){var c=e-t,u=i-n,l=a-o,h=s-r,f=(l*(n-r)-h*(t-o))/(h*c-l*u);return[t+f*c,n+f*u]}function l(t,n,e,i,o,r,a){var s=t-e,c=n-i,u=(a?r:-r)/Math.sqrt(s*s+c*c),l=u*c,h=-u*s,f=t+l,p=n+h,d=e+l,_=i+h,y=(f+d)/2,v=(p+_)/2,x=d-f,b=_-p,g=x*x+b*b,m=o-r,w=f*_-d*p,j=(b<0?-1:1)*Math.sqrt(Math.max(0,m*m*g-w*w)),M=(w*b-x*j)/g,k=(-w*x-b*j)/g,O=(w*b+x*j)/g,T=(-w*x+b*j)/g,A=M-y,S=k-v,N=O-y,P=T-v;return A*A+S*S>N*N+P*P&&(M=O,k=T),{cx:M,cy:k,x01:-l,y01:-h,x11:M*(o/m-1),y11:k*(o/m-1)}}var h=e(6),f=e(1),p=e(2);n.a=function(){function t(){var t,i,o=+n.apply(this,arguments),r=+e.apply(this,arguments),a=y.apply(this,arguments)-p.b,s=v.apply(this,arguments)-p.b,f=Math.abs(s-a),g=s>a;if(b||(b=t=Object(h.a)()),r<o&&(i=r,r=o,o=i),r>p.a)if(f>p.d-p.a)b.moveTo(r*Math.cos(a),r*Math.sin(a)),b.arc(0,0,r,a,s,!g),o>p.a&&(b.moveTo(o*Math.cos(s),o*Math.sin(s)),b.arc(0,0,o,s,a,g));else{var m,w,j=a,M=s,k=a,O=s,T=f,A=f,S=x.apply(this,arguments)/2,N=S>p.a&&(_?+_.apply(this,arguments):Math.sqrt(o*o+r*r)),P=Math.min(Math.abs(r-o)/2,+d.apply(this,arguments)),C=P,E=P;if(N>p.a){var q=c(N/o*Math.sin(S)),B=c(N/r*Math.sin(S));(T-=2*q)>p.a?(q*=g?1:-1,k+=q,O-=q):(T=0,k=O=(a+s)/2),(A-=2*B)>p.a?(B*=g?1:-1,j+=B,M-=B):(A=0,j=M=(a+s)/2)}var I=r*Math.cos(j),D=r*Math.sin(j),z=o*Math.cos(O),R=o*Math.sin(O);if(P>p.a){var L=r*Math.cos(M),W=r*Math.sin(M),U=o*Math.cos(k),Y=o*Math.sin(k);if(f<p.c){var H=T>p.a?u(I,D,U,Y,L,W,z,R):[z,R],X=I-H[0],$=D-H[1],F=L-H[0],J=W-H[1],V=1/Math.sin(Math.acos((X*F+$*J)/(Math.sqrt(X*X+$*$)*Math.sqrt(F*F+J*J)))/2),G=Math.sqrt(H[0]*H[0]+H[1]*H[1]);C=Math.min(P,(o-G)/(V-1)),E=Math.min(P,(r-G)/(V+1))}}A>p.a?E>p.a?(m=l(U,Y,I,D,r,E,g),w=l(L,W,z,R,r,E,g),b.moveTo(m.cx+m.x01,m.cy+m.y01),E<P?b.arc(m.cx,m.cy,E,Math.atan2(m.y01,m.x01),Math.atan2(w.y01,w.x01),!g):(b.arc(m.cx,m.cy,E,Math.atan2(m.y01,m.x01),Math.atan2(m.y11,m.x11),!g),b.arc(0,0,r,Math.atan2(m.cy+m.y11,m.cx+m.x11),Math.atan2(w.cy+w.y11,w.cx+w.x11),!g),b.arc(w.cx,w.cy,E,Math.atan2(w.y11,w.x11),Math.atan2(w.y01,w.x01),!g))):(b.moveTo(I,D),b.arc(0,0,r,j,M,!g)):b.moveTo(I,D),o>p.a&&T>p.a?C>p.a?(m=l(z,R,L,W,o,-C,g),w=l(I,D,U,Y,o,-C,g),b.lineTo(m.cx+m.x01,m.cy+m.y01),C<P?b.arc(m.cx,m.cy,C,Math.atan2(m.y01,m.x01),Math.atan2(w.y01,w.x01),!g):(b.arc(m.cx,m.cy,C,Math.atan2(m.y01,m.x01),Math.atan2(m.y11,m.x11),!g),b.arc(0,0,o,Math.atan2(m.cy+m.y11,m.cx+m.x11),Math.atan2(w.cy+w.y11,w.cx+w.x11),g),b.arc(w.cx,w.cy,C,Math.atan2(w.y11,w.x11),Math.atan2(w.y01,w.x01),!g))):b.arc(0,0,o,O,k,g):b.lineTo(z,R)}else b.moveTo(0,0);if(b.closePath(),t)return b=null,t+""||null}var n=i,e=o,d=Object(f.a)(0),_=null,y=r,v=a,x=s,b=null;return t.centroid=function(){var t=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+y.apply(this,arguments)+ +v.apply(this,arguments))/2-p.c/2;return[Math.cos(i)*t,Math.sin(i)*t]},t.innerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Object(f.a)(+e),t):n},t.outerRadius=function(n){return arguments.length?(e="function"==typeof n?n:Object(f.a)(+n),t):e},t.cornerRadius=function(n){return arguments.length?(d="function"==typeof n?n:Object(f.a)(+n),t):d},t.padRadius=function(n){return arguments.length?(_=null==n?null:"function"==typeof n?n:Object(f.a)(+n),t):_},t.startAngle=function(n){return arguments.length?(y="function"==typeof n?n:Object(f.a)(+n),t):y},t.endAngle=function(n){return arguments.length?(v="function"==typeof n?n:Object(f.a)(+n),t):v},t.padAngle=function(n){return arguments.length?(x="function"==typeof n?n:Object(f.a)(+n),t):x},t.context=function(n){return arguments.length?(b=null==n?null:n,t):b},t}},function(t,n,e){"use strict";function i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new i}var r=Math.PI,a=2*r,s=a-1e-6;i.prototype=o.prototype={constructor:i,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,i){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(t,n,e,i,o,r){this._+="C"+ +t+","+ +n+","+ +e+","+ +i+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(t,n,e,i,o){t=+t,n=+n,e=+e,i=+i,o=+o;var a=this._x1,s=this._y1,c=e-t,u=i-n,l=a-t,h=s-n,f=l*l+h*h;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>1e-6)if(Math.abs(h*c-u*l)>1e-6&&o){var p=e-a,d=i-s,_=c*c+u*u,y=p*p+d*d,v=Math.sqrt(_),x=Math.sqrt(f),b=o*Math.tan((r-Math.acos((_+f-y)/(2*v*x)))/2),g=b/x,m=b/v;Math.abs(g-1)>1e-6&&(this._+="L"+(t+g*l)+","+(n+g*h)),this._+="A"+o+","+o+",0,0,"+ +(h*p>l*d)+","+(this._x1=t+m*c)+","+(this._y1=n+m*u)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,i,o,c){t=+t,n=+n,e=+e;var u=e*Math.cos(i),l=e*Math.sin(i),h=t+u,f=n+l,p=1^c,d=c?i-o:o-i;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+h+","+f:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+h+","+f),e&&(d<0&&(d=d%a+a),d>s?this._+="A"+e+","+e+",0,1,"+p+","+(t-u)+","+(n-l)+"A"+e+","+e+",0,1,"+p+","+(this._x1=h)+","+(this._y1=f):d>1e-6&&(this._+="A"+e+","+e+",0,"+ +(d>=r)+","+p+","+(this._x1=t+e*Math.cos(o))+","+(this._y1=n+e*Math.sin(o))))},rect:function(t,n,e,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}},n.a=o},function(t,n,e){"use strict";e(1),e(94),e(95),e(2)},function(t,n,e){"use strict";n.a=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}},function(t,n,e){"use strict";n.a=function(t){return t}},function(t,n,e){"use strict";e(33),e(31),e(34)},function(t,n,e){"use strict";var i=(e(6),e(35)),o=e(36),r=e(37),a=e(38),s=e(39),c=e(40),u=e(41);e(1),i.a,o.a,r.a,s.a,a.a,c.a,u.a},function(t,n,e){"use strict";function i(t){this._context=t}var o=e(8),r=e(9);i.prototype={areaStart:o.a,areaEnd:o.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Object(r.b)(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}}},function(t,n,e){"use strict";function i(t){this._context=t}var o=e(9);i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 3:this._point=4;default:Object(o.b)(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}}},function(t,n,e){"use strict";function i(t,n){this._basis=new o.a(t),this._beta=n}var o=e(9);i.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var i,o=t[0],r=n[0],a=t[e]-o,s=n[e]-r,c=-1;++c<=e;)i=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(o+i*a),this._beta*n[c]+(1-this._beta)*(r+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};!function t(n){function e(t){return 1===n?new o.a(t):new i(t,n)}return e.beta=function(n){return t(+n)},e}(.85)},function(t,n,e){"use strict";function i(t,n){this._context=t,this._alpha=n}var o=e(42),r=e(8),a=e(20);i.prototype={areaStart:r.a,areaEnd:r.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,i=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Object(a.b)(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};!function t(n){function e(t){return n?new i(t,n):new o.a(t,0)}return e.alpha=function(n){return t(+n)},e}(.5)},function(t,n,e){"use strict";function i(t,n){this._context=t,this._alpha=n}var o=e(43),r=e(20);i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,i=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(r.b)(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};!function t(n){function e(t){return n?new i(t,n):new o.a(t,0)}return e.alpha=function(n){return t(+n)},e}(.5)},function(t,n,e){"use strict";function i(t){this._context=t}var o=e(8);i.prototype={areaStart:o.a,areaEnd:o.a,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}}},function(t,n,e){"use strict";function i(t){return t<0?-1:1}function o(t,n,e){var o=t._x1-t._x0,r=n-t._x1,a=(t._y1-t._y0)/(o||r<0&&-0),s=(e-t._y1)/(r||o<0&&-0),c=(a*r+s*o)/(o+r);return(i(a)+i(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(c))||0}function r(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function a(t,n,e){var i=t._x0,o=t._y0,r=t._x1,a=t._y1,s=(r-i)/3;t._context.bezierCurveTo(i+s,o+s*n,r-s,a-s*e,r,a)}function s(t){this._context=t}function c(t){this._context=new u(t)}function u(t){this._context=t}s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:a(this,this._t0,r(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,t!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,a(this,r(this,e=o(this,t,n)),e);break;default:a(this,this._t0,e=o(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(c.prototype=Object.create(s.prototype)).point=function(t,n){s.prototype.point.call(this,n,t)},u.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,i,o,r){this._context.bezierCurveTo(n,t,i,e,r,o)}}},function(t,n,e){"use strict";function i(t){this._context=t}function o(t){var n,e,i=t.length-1,o=new Array(i),r=new Array(i),a=new Array(i);for(o[0]=0,r[0]=2,a[0]=t[0]+2*t[1],n=1;n<i-1;++n)o[n]=1,r[n]=4,a[n]=4*t[n]+2*t[n+1];for(o[i-1]=2,r[i-1]=7,a[i-1]=8*t[i-1]+t[i],n=1;n<i;++n)e=o[n]/r[n-1],r[n]-=e,a[n]-=e*a[n-1];for(o[i-1]=a[i-1]/r[i-1],n=i-2;n>=0;--n)o[n]=(a[n]-o[n+1])/r[n];for(r[i-1]=(t[i]+o[i-1])/2,n=0;n<i-1;++n)r[n]=2*t[n+1]-o[n+1];return[o,r]}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var i=o(t),r=o(n),a=0,s=1;s<e;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[s],n[s]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}}},function(t,n,e){"use strict";function i(t,n){this._context=t,this._t=n}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}}},function(t,n,e){"use strict";e(108),e(1),e(3),e(4)},function(t,n,e){"use strict";e.d(n,"a",function(){return i});var i=Array.prototype.slice},function(t,n,e){"use strict";e(3)},function(t,n,e){"use strict";e(3)},function(t,n,e){"use strict";e(3)},function(t,n,e){"use strict";e(21)},function(t,n,e){"use strict";e(4),e(21)},function(t,n,e){"use strict";e(4)},function(t,n,e){"use strict";function i(t){return t.replace("_"," ")}function o(t){return t.replace("br","")}Object.defineProperty(n,"__esModule",{value:!0}),n.default={parseTitle:i,parseBody:o}},function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function o(t){var n=this,e=d3.select(n);e.select("div.tooltip").classed("is-visible",!0);var i=t.text.replace(/(↵)([a-z])/g,function(t,n,e){return n+e.toUpperCase()}).replace(/([!?.]\s+)([a-z])/g,function(t,n,e){return n+e.toUpperCase()}).replace(/^[a-z]/,function(t){return t.toUpperCase()}).replace(/↵/g,"<br></br>").replace(/\si\s/g," I ").replace(/\si\'/g," I'").substring(0,A),o=i.lastIndexOf(" "),r=i.substring(0,o),a=e.parent(),s=a.select(".tooltip");s.select("p").text(r+"..."),s.classed("is-visible",!0);var c=n.offsetLeft,u=n.offsetTop,h=c+w+j,f=u-j,p=window.innerWidth,d=+d3.select("div.tooltip").st("width").replace(/px/,"");(d3.select("body").classed("is-mobile")||d3.select("body").node().offsetWidth<600)&&(h=p/2-d/2-w,s.select(".tooltip-close-button").st("visibility","visible"),s.select("div.tooltip-close-button").on("click",l)),s.st({left:h,top:f})}function r(t){for(var n=[],e=Math.min(3,t);n.length<e;){var i=Math.floor(Math.random()*t);n.includes(i)||n.push(i)}return n}function a(t){var n=d3.select(this),e=n.select(".examples"),i=r(t.values.length),o=t.values.filter(function(t,n){return i.includes(n)}),a=e.selectAll(".example__content").data(o);a.exit().remove();var s=a.enter().append("div.example__content.tk-atlas");s.append("p.example__dearabby.x-small"),s.append("p.example__question.x-small"),s.append("p.example__yeartitle.x-small");var c=s.merge(a);c.select(".example__dearabby").html("<em>Dear Abby, </em>"),c.select(".example__question").html(function(t){return"<span class='highlight'>"+t.text.replace(/<br>/g,"").substr(0,140)+"...</span> <a>Read More</a>"}),c.select(".example__yeartitle").html(function(t){return"<em>"+t.title.replace(/\b\w/g,function(t){return t.toUpperCase()})+"</em>"})}function s(t){return t.map(function(t,n){return _({},t,{text:t.text?t.text.replace(/(↵)([a-z])/g,function(t,n,e){return n+e.toUpperCase()}).replace(/([!?.]\s+)([a-z])/g,function(t,n,e){return n+e.toUpperCase()}).replace(/^[a-z]/,function(t){return t.toUpperCase()}).replace(/↵/g,"<br></br>").replace(/\si\s/g," I ").replace(/\si\'/g," I'").replace(/\(i\s/g,"(I ").replace(/(\,\s)(\"[a-z])/g,function(t,n,e){return n+e.toUpperCase()}).replace(/(\s)(\"[a-z])([a-z]*\')/g,function(t,n,e,i){return n+e.toUpperCase()+i}).replace(/(\"[a-z])([a-z]*\")/g,function(t,n,e){return n.toUpperCase()+e}):"text"})})}function c(){d3.select(this).parent().parent().each(a)}function u(){d3.select(this).select(".tooltip").classed("is-visible",!1)}function l(){d3.select(this).parent().parent().classed("is-visible",!1),d3.select(this).st("visibility","hidden")}function h(){O.selectAll(".cluster").remove();var t=O.selectAll(".cluster").data(m[M].slice(0,10)),n=t.enter().append("div.cluster"),e=n.append("div.graphic");e.append("p.category.tk-atlas").text(function(t){return t.key.replace(/_/g," ")}),e.append("p.count.tk-atlas.x-small").text(function(t){return t.values.length+" letters"});var i=e.append("div.grid"),r=i.selectAll(".post").data(function(t){return t.values}).enter().append("div.post"),s=i.append("div.tooltip");s.append("div.tooltip-close-button-container");var h=s.select("div.tooltip-close-button-container").append("div.tooltip-close-button");h.text("✕"),s.append("p.snippet.x-small.tk-atlas"),s.append("p.readmore.tk-atlas.xx-small").text("Click post to read more"),i.on("mouseleave",u),d3.select("body").classed("is-mobile")||d3.select("body").node().offsetWidth<600?(r.on("click",o),h.on("mousedown",function(){d3.event.stopPropagation(),l()}),s.on("mousedown",function(t){return(0,v.default)(t)})):(r.on("mouseenter",o),r.on("click",function(t){return(0,v.default)(t)})),n.append("div.examples"),n.append("div.example__buttons").append("button.btn.btn--shuffle").html(x).on("click",c),n.each(a),d3.selectAll("div.example__content").on("click",function(t){return(0,v.default)(t)})}function f(){}function p(){var t=d3.select(this);T.classed("is-selected",!1),t.classed("is-selected",!0);var n=t.text().trim().toLowerCase();M=b.findIndex(function(t){return t===n}),h(),f()}function d(){var t,n=b.map(function(t){return"assets/data/relation-"+t+".csv"});(t=d3).loadData.apply(t,i(n).concat([function(t,n){g=n,g=g.map(s),m=g.map(function(t){return d3.nest().key(function(t){return t.topic}).entries(t).filter(function(t){return t.key}).sort(function(t,n){return d3.descending(t.values.length,n.values.length)})}),h(),f(),T.on("click",p),T.filter(function(t,n){return 0===n}).classed("is-selected",!0);var e="#relation-fixed",i=function(t){return d3.select("#relation-fixed").select(function(){return this.parentNode}).select(".chart").node().getBoundingClientRect().height+200}(e);new ScrollMagic.Scene({triggerElement:e,duration:i,triggerHook:0}).setPin(e,{pushFollowers:!1}).addTo(S)}]))}Object.defineProperty(n,"__esModule",{value:!0});var _=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},y=e(23),v=function(t){return t&&t.__esModule?t:{default:t}}(y),x='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>',b=["husbands","wives","sons","daughters","friends","bosses"],g=null,m=null,w=16,j=2,M=0,k=d3.select(".relation"),O=k.select(".chart"),T=k.selectAll(".sidebar li"),A=(d3.select(".letter"),100),S=new ScrollMagic.Controller;n.default={init:d,resize:f}},function(t,n,e){"use strict";var i=new ScrollMagic.Controller,o={top:12,left:12,right:12,bottom:36},r=d3.select(".graphic").node().offsetWidth-o.left-o.right,a=(window.innerHeight,r<600),s=d3.select(".layer1"),c=d3.select(".layer2"),u=d3.select(".layer3"),l=d3.select(".monkey-layer1"),h=(d3.select(".monkey-layer2"),d3.scaleLinear().domain([0,1]).range([0,-10])),f=d3.scaleLinear().domain([0,1]).range([0,-50]),p=d3.scaleLinear().domain([0,1]).range([0,-100]),d=d3.scaleLinear().domain([0,1]).range([35,-20]);a&&(h=d3.scaleLinear().domain([0,1]).range([0,-5]),f=d3.scaleLinear().domain([0,1]).range([0,-10]),p=d3.scaleLinear().domain([0,1]).range([0,-20]),d=d3.scaleLinear().domain([0,1]).range([15,-5]));var _=0,y=d3.select("#parallaxContainer").node().getBoundingClientRect().height,v=d3.select("#monkeyContainer").node().getBoundingClientRect().height;new ScrollMagic.Scene({triggerElement:"#parallaxContainer",duration:a?1.5*y:y,offset:-400,triggerHook:0}).addTo(i).on("progress",function(t){var n=Math.round(100*t.progress)/100;n!=_&&(_=n),s.style("top",h(_)+"px"),c.style("top",f(_)+"px"),u.style("top",p(_)+"px")}),new ScrollMagic.Scene({triggerElement:"#monkeyContainer",duration:v,offset:-400,triggerHook:0}).addTo(i).on("progress",function(t){var n=Math.round(100*t.progress)/100;n!=_&&(_=n),l.style("top",d(_)+"px")})}]);